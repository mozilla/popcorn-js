/*
 * popcorn.js version d05323f
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(m,i){function k(a){E.put.call(this,a)}function d(a){this.parent=a;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.endIndex=this.startIndex=0;this.previousUpdateTime=-1;this.count=1}function b(a,c){return function(){if(g.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(l){g.plugin.errors.push({plugin:c,thrown:l,source:a.toString()});this.emit("pluginerror",g.plugin.errors)}}}if(i.addEventListener){var f=Array.prototype,
h=Object.prototype,e=f.forEach,n=f.slice,u=h.hasOwnProperty,q=h.toString,v=m.Popcorn,w=[],o=false,z={events:{hash:{},apis:{}}},J=function(){return m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||m.oRequestAnimationFrame||m.msRequestAnimationFrame||function(a){m.setTimeout(a,16)}}(),E={put:function(a){for(var c in a)if(a.hasOwnProperty(c))this[c]=a[c]}},g=function(a,c){return new g.p.init(a,c||null)};g.version="d05323f";g.isSupported=true;g.instances=[];g.p=g.prototype=
{init:function(a,c){var l,j=this;if(typeof a==="function")if(i.readyState==="complete")a(i,g);else{w.push(a);if(!o){o=true;var s=function(){i.removeEventListener("DOMContentLoaded",s,false);for(var D=0,r=w.length;D<r;D++)w[D].call(i,g);w=null};i.addEventListener("DOMContentLoaded",s,false)}}else{if(typeof a==="string")try{l=i.querySelector(a)}catch(t){throw Error("Popcorn.js Error: Invalid media element selector: "+a);}this.media=l||a;l=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";
this[l]=this.media;this.options=g.extend({},c)||{};this.id=this.options.id||g.guid(l);if(g.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:g.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new d(this)};g.instances.push(this);var y=function(){if(j.media.currentTime<0)j.media.currentTime=0;j.media.removeEventListener("loadedmetadata",y,false);var D,
r,M,x,p;D=j.media.duration;D=D!=D?Number.MAX_VALUE:D+1;g.addTrackEvent(j,{start:D,end:D});if(!j.isDestroyed){j.data.durationChange=function(){var B=j.media.duration,R=B+1,K=j.data.trackEvents.byStart,N=j.data.trackEvents.byEnd;K.pop();N.pop();for(var C=N.length-1;C>0;C--)N[C].end>B&&j.removeTrackEvent(N[C]._id);for(N=0;N<K.length;N++)K[N].end>B&&j.removeTrackEvent(K[N]._id);j.data.trackEvents.byEnd.push({start:R,end:R});j.data.trackEvents.byStart.push({start:R,end:R})};j.media.addEventListener("durationchange",
j.data.durationChange,false)}if(j.options.frameAnimation){j.data.timeUpdate=function(){g.timeUpdate(j,{});g.forEach(g.manifest,function(B,R){if(r=j.data.running[R]){x=r.length;for(var K=0;K<x;K++){M=r[K];(p=M._natives)&&p.frame&&p.frame.call(j,{},M,j.currentTime())}}});j.emit("timeupdate");!j.isDestroyed&&J(j.data.timeUpdate)};!j.isDestroyed&&J(j.data.timeUpdate)}else{j.data.timeUpdate=function(B){g.timeUpdate(j,B)};j.isDestroyed||j.media.addEventListener("timeupdate",j.data.timeUpdate,false)}};j.media.addEventListener("error",
function(){j.error=j.media.error},false);j.media.readyState>=1?y():j.media.addEventListener("loadedmetadata",y,false);return this}}};g.p.init.prototype=g.p;g.byId=function(a){for(var c=g.instances,l=c.length,j=0;j<l;j++)if(c[j].id===a)return c[j];return null};g.forEach=function(a,c,l){if(!a||!c)return{};l=l||this;var j,s;if(e&&a.forEach===e)return a.forEach(c,l);if(q.call(a)==="[object NodeList]"){j=0;for(s=a.length;j<s;j++)c.call(l,a[j],j,a);return a}for(j in a)u.call(a,j)&&c.call(l,a[j],j,a);return a};
g.extend=function(a){var c=n.call(arguments,1);g.forEach(c,function(l){for(var j in l)a[j]=l[j]});return a};g.extend(g,{noConflict:function(a){if(a)m.Popcorn=v;return g},error:function(a){throw Error(a);},guid:function(a){g.guid.counter++;return(a?a:"")+(+new Date+g.guid.counter)},sizeOf:function(a){var c=0,l;for(l in a)c++;return c},isArray:Array.isArray||function(a){return q.call(a)==="[object Array]"},nop:function(){},position:function(a){if(!a.parentNode)return null;a=a.getBoundingClientRect();
var c={},l=i.documentElement,j=i.body,s,t,y;s=l.clientTop||j.clientTop||0;t=l.clientLeft||j.clientLeft||0;y=m.pageYOffset&&l.scrollTop||j.scrollTop;l=m.pageXOffset&&l.scrollLeft||j.scrollLeft;s=Math.ceil(a.top+y-s);t=Math.ceil(a.left+l-t);for(var D in a)c[D]=Math.round(a[D]);return g.extend({},c,{top:s,left:t})},disable:function(a,c){if(!a.data.disabled[c]){a.data.disabled[c]=true;if(c in g.registryByName&&a.data.running[c])for(var l=a.data.running[c].length-1,j;l>=0;l--){j=a.data.running[c][l];j._natives.end.call(a,
null,j);a.emit("trackend",g.extend({},j,{plugin:j.type,type:"trackend"}))}return a}},enable:function(a,c){if(a.data.disabled[c]){a.data.disabled[c]=false;if(c in g.registryByName&&a.data.running[c])for(var l=a.data.running[c].length-1,j;l>=0;l--){j=a.data.running[c][l];j._natives.start.call(a,null,j);a.emit("trackstart",g.extend({},j,{plugin:j.type,type:"trackstart",track:j}))}return a}},destroy:function(a){var c=a.data.events,l=a.data.trackEvents,j,s,t,y;for(s in c){j=c[s];for(t in j)delete j[t];
c[s]=null}for(y in g.registryByName)g.removePlugin(a,y);l.byStart.length=0;l.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}g.instances.splice(g.instances.indexOf(a),1)}});g.guid.counter=1;g.extend(g.p,function(){var a={};g.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(c){a[c]=function(l){var j;if(typeof this.media[c]==="function"){if(l!=null&&/play|pause/.test(c))this.media.currentTime=g.util.toSeconds(l);this.media[c]();return this}if(l!=null){j=this.media[c];this.media[c]=l;j!==l&&this.emit("attrchange",{attribute:c,previousValue:j,currentValue:l});return this}return this.media[c]}});return a}());g.forEach("enable disable".split(" "),function(a){g.p[a]=function(c){return g[a](this,c)}});g.extend(g.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,c,l){var j=arguments.length,s="trackadded",t,y;try{y=g.util.toSeconds(a)}catch(D){}if(typeof y==="number")a=y;if(typeof a==="number"&&j===2){l=c;c=a;a=g.guid("cue")}else if(j===1)c=-1;else if(t=this.getTrackEvent(a)){this.data.trackEvents.remove(a);k.end(this,t);g.removeTrackEvent.ref(this,a);s="cuechange";if(typeof a==="string"&&j===2){if(typeof c==="number")l=t._natives.start;if(typeof c==="function"){l=c;c=t.start}}}else if(j>=2){if(typeof c==="string"){try{y=g.util.toSeconds(c)}catch(r){}c=
y}if(typeof c==="number")l=l||g.nop();if(typeof c==="function"){l=c;c=-1}}j={id:a,start:c,end:c+1,_running:false,_natives:{start:l||g.nop,end:g.nop,type:"cue"}};if(t)j=g.extend(t,j);if(s==="cuechange"){j._id=j.id||j._id||g.guid(j._natives.type);this.data.trackEvents.add(j);k.start(this,j);this.timeUpdate(this,null,true);g.addTrackEvent.ref(this,j);this.emit(s,g.extend({},j,{id:a,type:s,previousValue:{time:t.start,fn:t._natives.start},currentValue:{time:c,fn:l||g.nop},track:t}))}else g.addTrackEvent(this,
j);return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return g.position(this.media)},toggle:function(a){return g[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,c){if(g.isArray(a)){g.forEach(a,function(l){for(var j in l)this.defaults(j,
l[j])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});g.extend(this.options.defaults[a],c);return this}});g.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
g.Events.Natives=g.Events.UIEvents+" "+g.Events.MouseEvents+" "+g.Events.Events;z.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,c){for(var l=z.events.apiTypes,j=a.Natives.split(/\s+/g),s=0,t=j.length;s<t;s++)c.hash[j[s]]=true;l.forEach(function(y){c.apis[y]={};for(var D=a[y].split(/\s+/g),r=D.length,M=0;M<r;M++)c.apis[y][D[M]]=true})})(g.Events,z.events);g.events={isNative:function(a){return!!z.events.hash[a]},getInterface:function(a){if(!g.events.isNative(a))return false;var c=
z.events,l=c.apiTypes;c=c.apis;for(var j=0,s=l.length,t,y;j<s;j++){y=l[j];if(c[y][a]){t=y;break}}return t},all:g.Events.Natives.split(/\s+/g),fn:{trigger:function(a,c){var l,j=this.data.events[a];if(j){if(l=g.events.getInterface(a)){l=i.createEvent(l);l.initEvent(a,true,true,m,1);this.media.dispatchEvent(l);return this}for(l=j.slice();l.length;)l.shift().call(this,c)}return this},listen:function(a,c){var l=this,j=true,s=g.events.hooks[a],t,y;if(typeof c!=="function")throw Error("Popcorn.js Error: Listener is not a function");
if(!this.data.events[a]){this.data.events[a]=[];j=false}if(s){s.add&&s.add.call(this,{},c);if(s.bind)a=s.bind;if(s.handler){y=c;c=function(D){s.handler.call(l,D,y)}}j=true;if(!this.data.events[a]){this.data.events[a]=[];j=false}}this.data.events[a].push(c);!j&&g.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(D){if(l.data.events[a])for(t=l.data.events[a].slice();t.length;)t.shift().call(l,D)},false);return this},unlisten:function(a,c){var l,j=this.data.events[a];if(j){if(typeof c===
"string"){for(l=0;l<j.length;l++)j[l].name===c&&j.splice(l--,1);return this}else if(typeof c==="function"){for(;l!==-1;){l=j.indexOf(c);l!==-1&&j.splice(l,1)}return this}this.data.events[a]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,c){var l=false;if(this.media.readyState){setTimeout(function(){c.call(this,a)}.bind(this),0);l=true}this.data.hooks.canplayall={fired:l}},handler:function(a,c){if(!this.data.hooks.canplayall.fired){c.call(this,a);this.data.hooks.canplayall.fired=
true}}}}};g.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){g.p[a[0]]=g.p[a[1]]=g.events.fn[a[0]]});k.start=function(a,c){if(c.end>a.media.currentTime&&c.start<=a.media.currentTime&&!c._running){c._running=true;a.data.running[c._natives.type].push(c);if(!a.data.disabled[c._natives.type]){c._natives.start.call(a,null,c);a.emit("trackstart",g.extend({},c,{plugin:c._natives.type,type:"trackstart",track:c}))}}};k.end=function(a,c){var l;if((c.end<=a.media.currentTime||c.start>
a.media.currentTime)&&c._running){l=a.data.running[c._natives.type];c._running=false;l.splice(l.indexOf(c),1);if(!a.data.disabled[c._natives.type]){c._natives.end.call(a,null,c);a.emit("trackend",g.extend({},c,{plugin:c._natives.type,type:"trackend",track:c}))}}};d.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(c){var l,j;if(!a)return true;for(l in a){j=a[l];if(c[l]&&c[l]===j||c._natives[l]&&c._natives[l]===j)return true}return false})};d.prototype.add=function(a){var c=
this.byStart,l=this.byEnd,j;a&&a._id&&this.parent.data.history.push(a._id);a.start=g.util.toSeconds(a.start,this.parent.options.framerate);a.end=g.util.toSeconds(a.end,this.parent.options.framerate);for(j=c.length-1;j>=0;j--)if(a.start>=c[j].start){c.splice(j+1,0,a);break}for(c=l.length-1;c>=0;c--)if(a.end>l[c].end){l.splice(c+1,0,a);break}j<=this.parent.data.trackEvents.startIndex&&a.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++;c<=this.parent.data.trackEvents.endIndex&&
a.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++;this.count++};d.prototype.remove=function(a){if(a instanceof k)a=a.id;if(typeof a==="object"){this.where(a).forEach(function(x){this.removeTrackEvent(x._id)},this.parent);return this}var c,l,j;j=this.byStart.length;for(var s=0,t=0,y=[],D=[],r=[],M=[];--j>-1;){c=this.byStart[s];l=this.byEnd[s];if(!c._id){y.push(c);D.push(l)}if(c._id){c._id!==a&&y.push(c);l._id!==a&&D.push(l);if(c._id===a)t=s}s++}j=this.animating.length;
s=0;if(j)for(;--j>-1;){c=this.animating[s];c._id||r.push(c);c._id&&c._id!==a&&r.push(c);s++}t<=this.startIndex&&this.startIndex--;t<=this.endIndex&&this.endIndex--;this.byStart=y;this.byEnd=D;this.animating=r;this.count--;j=this.parent.data.history.length;for(s=0;s<j;s++)this.parent.data.history[s]!==a&&M.push(this.parent.data.history[s]);this.parent.data.history=M};g.addTrackEvent=function(a,c){var l;if(!(c instanceof k)){if((c=new k(c))&&c._natives&&c._natives.type&&a.options.defaults&&a.options.defaults[c._natives.type]){l=
g.extend({},c);g.extend(c,a.options.defaults[c._natives.type],l)}if(c._natives){c._id=c.id||c._id||g.guid(c._natives.type);if(c._natives._setup){c._natives._setup.call(a,c);a.emit("tracksetup",g.extend({},c,{plugin:c._natives.type,type:"tracksetup",track:c}))}}a.data.trackEvents.add(c);k.start(a,c);this.timeUpdate(a,null,true);c._id&&g.addTrackEvent.ref(a,c);a.emit("trackadded",g.extend({},c,c._natives?{plugin:c._natives.type}:{},{type:"trackadded",track:c}))}};g.addTrackEvent.ref=function(a,c){a.data.trackRefs[c._id]=
c;return a};g.removeTrackEvent=function(a,c){var l=a.getTrackEvent(c);if(l){l._natives._teardown&&l._natives._teardown.call(a,l);a.data.trackEvents.remove(c);g.removeTrackEvent.ref(a,c);l._natives&&a.emit("trackremoved",g.extend({},l,{plugin:l._natives.type,type:"trackremoved",track:l}))}};g.removeTrackEvent.ref=function(a,c){delete a.data.trackRefs[c];return a};g.getTrackEvents=function(a){var c=[];a=a.data.trackEvents.byStart;for(var l=a.length,j=0,s;j<l;j++){s=a[j];s._id&&c.push(s)}return c};g.getTrackEvents.ref=
function(a){return a.data.trackRefs};g.getTrackEvent=function(a,c){return a.data.trackRefs[c]};g.getTrackEvent.ref=function(a,c){return a.data.trackRefs[c]};g.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};g.timeUpdate=function(a,c){var l=a.media.currentTime,j=a.data.trackEvents.previousUpdateTime,s=a.data.trackEvents,t=s.endIndex,y=s.startIndex,D=s.byStart.length,r=s.byEnd.length,M=g.registryByName,x,p,B;if(j<=l){for(;s.byEnd[t]&&s.byEnd[t].end<=l;){x=s.byEnd[t];
p=(j=x._natives)&&j.type;if(!j||M[p]||a[p]){if(x._running===true){x._running=false;B=a.data.running[p];B.splice(B.indexOf(x),1);if(!a.data.disabled[p]){j.end.call(a,c,x);a.emit("trackend",g.extend({},x,{plugin:p,type:"trackend",track:x}))}}t++}else{g.removeTrackEvent(a,x._id);return}}for(;s.byStart[y]&&s.byStart[y].start<=l;){x=s.byStart[y];p=(j=x._natives)&&j.type;if(!j||M[p]||a[p]){if(x.end>l&&x._running===false){x._running=true;a.data.running[p].push(x);if(!a.data.disabled[p]){j.start.call(a,c,
x);a.emit("trackstart",g.extend({},x,{plugin:p,type:"trackstart",track:x}))}}y++}else{g.removeTrackEvent(a,x._id);return}}}else if(j>l){for(;s.byStart[y]&&s.byStart[y].start>l;){x=s.byStart[y];p=(j=x._natives)&&j.type;if(!j||M[p]||a[p]){if(x._running===true){x._running=false;B=a.data.running[p];B.splice(B.indexOf(x),1);if(!a.data.disabled[p]){j.end.call(a,c,x);a.emit("trackend",g.extend({},x,{plugin:p,type:"trackend",track:x}))}}y--}else{g.removeTrackEvent(a,x._id);return}}for(;s.byEnd[t]&&s.byEnd[t].end>
l;){x=s.byEnd[t];p=(j=x._natives)&&j.type;if(!j||M[p]||a[p]){if(x.start<=l&&x._running===false){x._running=true;a.data.running[p].push(x);if(!a.data.disabled[p]){j.start.call(a,c,x);a.emit("trackstart",g.extend({},x,{plugin:p,type:"trackstart",track:x}))}}t--}else{g.removeTrackEvent(a,x._id);return}}}s.endIndex=t;s.startIndex=y;s.previousUpdateTime=l;s.byStart.length<D&&s.startIndex--;s.byEnd.length<r&&s.endIndex--};g.extend(g.p,{getTrackEvents:function(){return g.getTrackEvents.call(null,this)},
getTrackEvent:function(a){return g.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return g.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){g.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){g.removePlugin.call(null,this,a);return this},timeUpdate:function(a){g.timeUpdate.call(null,this,a);return this},destroy:function(){g.destroy.call(null,this);return this}});g.manifest={};g.registry=[];g.registryByName={};g.plugin=function(a,c,l){if(g.protect.natives.indexOf(a.toLowerCase())>=
0)g.error("'"+a+"' is a protected function name");else{var j=typeof c==="function",s=["start","end","type","manifest"],t=["_setup","_teardown","start","end","frame"],y={},D=function(x,p){x=x||g.nop;p=p||g.nop;return function(){x.apply(this,arguments);p.apply(this,arguments)}};g.manifest[a]=l=l||c.manifest||{};t.forEach(function(x){c[x]=b(c[x]||g.nop,a)});var r=function(x,p){if(!p)return this;if(p.ranges&&g.isArray(p.ranges)){g.forEach(p.ranges,function(N){N=g.extend({},p,N);delete N.ranges;this[a](N)},
this);return this}var B=p._natives={},R="",K;g.extend(B,x);p._natives.type=p._natives.plugin=a;p._running=false;B.start=B.start||B["in"];B.end=B.end||B.out;if(p.once)B.end=D(B.end,function(){this.removeTrackEvent(p._id)});B._teardown=D(function(){var N=n.call(arguments),C=this.data.running[B.type];N.unshift(null);N[1]._running&&C.splice(C.indexOf(p),1)&&B.end.apply(this,N);N[1]._running=false;this.emit("trackend",g.extend({},p,{plugin:B.type,type:"trackend",track:g.getTrackEvent(this,p.id||p._id)}))},
B._teardown);B._teardown=D(B._teardown,function(){this.emit("trackteardown",g.extend({},p,{plugin:a,type:"trackteardown",track:g.getTrackEvent(this,p.id||p._id)}))});p.compose=p.compose||[];if(typeof p.compose==="string")p.compose=p.compose.split(" ");p.effect=p.effect||[];if(typeof p.effect==="string")p.effect=p.effect.split(" ");p.compose=p.compose.concat(p.effect);p.compose.forEach(function(N){R=g.compositions[N]||{};t.forEach(function(C){B[C]=D(B[C],R[C])})});p._natives.manifest=l;if(!("start"in
p))p.start=p["in"]||0;if(!p.end&&p.end!==0)p.end=p.out||Number.MAX_VALUE;if(!u.call(p,"toString"))p.toString=function(){var N=["start: "+p.start,"end: "+p.end,"id: "+(p.id||p._id)];p.target!=null&&N.push("target: "+p.target);return a+" ( "+N.join(", ")+" )"};if(!p.target){K="options"in l&&l.options;p.target=K&&"target"in K&&K.target}if(!p._id&&p._natives)p._id=g.guid(p._natives.type);if(p instanceof k){if(p._natives){p._id=p.id||p._id||g.guid(p._natives.type);if(p._natives._setup){p._natives._setup.call(this,
p);this.emit("tracksetup",g.extend({},p,{plugin:p._natives.type,type:"tracksetup",track:p}))}}this.data.trackEvents.add(p);k.start(this,p);this.timeUpdate(this,null,true);p._id&&g.addTrackEvent.ref(this,p)}else g.addTrackEvent(this,p);g.forEach(x,function(N,C){s.indexOf(C)===-1&&this.on(C,N)},this);return this};g.p[a]=y[a]=function(x,p){var B,R;if(x&&!p)p=x;else if(B=this.getTrackEvent(x)){R=p;var K={},N;for(N in B)if(u.call(R,N)&&u.call(B,N))K[N]=B[N];if(B._natives._update){this.data.trackEvents.remove(B);
if(u.call(p,"start"))B.start=p.start;if(u.call(p,"end"))B.end=p.end;k.end(this,B);j&&c.call(this,B);B._natives._update.call(this,B,p);this.data.trackEvents.add(B);k.start(this,B)}else{g.extend(B,p);this.data.trackEvents.remove(x);B._natives._teardown&&B._natives._teardown.call(this,B);g.removeTrackEvent.ref(this,x);if(j)r.call(this,c.call(this,B),B);else{B._id=B.id||B._id||g.guid(B._natives.type);if(B._natives&&B._natives._setup){B._natives._setup.call(this,B);this.emit("tracksetup",g.extend({},B,
{plugin:B._natives.type,type:"tracksetup",track:B}))}this.data.trackEvents.add(B);k.start(this,B);this.timeUpdate(this,null,true);g.addTrackEvent.ref(this,B)}this.emit("trackchange",{id:B.id,type:"trackchange",previousValue:K,currentValue:B,track:B});return this}B._natives.type!=="cue"&&this.emit("trackchange",{id:B.id,type:"trackchange",previousValue:K,currentValue:R,track:B});return this}else p.id=x;this.data.running[a]=this.data.running[a]||[];B=g.extend({},this.options.defaults&&this.options.defaults[a]||
{},p);r.call(this,j?c.call(this,B):c,B);return this};l&&g.extend(c,{manifest:l});var M={fn:y[a],definition:c,base:c,parents:[],name:a};g.registry.push(g.extend(y,M,{type:a}));g.registryByName[a]=M;return y}};g.plugin.errors=[];g.plugin.debug=g.version==="d05323f";g.removePlugin=function(a,c){if(!c){c=a;a=g.p;if(g.protect.natives.indexOf(c.toLowerCase())>=0){g.error("'"+c+"' is a protected function name");return}var l=g.registry.length,j;for(j=0;j<l;j++)if(g.registry[j].name===c){g.registry.splice(j,
1);delete g.registryByName[c];delete g.manifest[c];delete a[c];return}}l=a.data.trackEvents.byStart;j=a.data.trackEvents.byEnd;var s=a.data.trackEvents.animating,t,y;t=0;for(y=l.length;t<y;t++){if(l[t]&&l[t]._natives&&l[t]._natives.type===c){l[t]._natives._teardown&&l[t]._natives._teardown.call(a,l[t]);l.splice(t,1);t--;y--;if(a.data.trackEvents.startIndex<=t){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}j[t]&&j[t]._natives&&j[t]._natives.type===c&&j.splice(t,1)}t=0;for(y=s.length;t<
y;t++)if(s[t]&&s[t]._natives&&s[t]._natives.type===c){s.splice(t,1);t--;y--}};g.compositions={};g.compose=function(a,c,l){g.manifest[a]=l||c.manifest||{};g.compositions[a]=c};g.plugin.effect=g.effect=g.compose;var G=/^(?:\.|#|\[)/;g.dom={debug:false,find:function(a,c){var l=null;c=c||i;if(a){if(!G.test(a)){l=i.getElementById(a);if(l!==null)return l}try{l=c.querySelector(a)}catch(j){if(g.dom.debug)throw Error(j);}}return l}};var A=/\?/,O={ajax:null,url:"",data:"",dataType:"",success:g.nop,type:"GET",
async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8"};g.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))g.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=g.extend({},O,a);a.ajax=new XMLHttpRequest;if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(A.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.type==="POST"&&a.ajax.setRequestHeader("Content-Type",a.contentType);
a.ajax.send(a.data||null);return g.xhr.httpData(a)}}};g.xhr.httpData=function(a){var c,l=null,j,s=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{l=JSON.parse(a.ajax.responseText)}catch(t){}c={xml:a.ajax.responseXML,text:a.ajax.responseText,json:l};if(!c.xml||!c.xml.documentElement){c.xml=null;try{j=new DOMParser;s=j.parseFromString(a.ajax.responseText,"text/xml");if(!s.getElementsByTagName("parsererror").length)c.xml=s}catch(y){}}if(a.dataType)c=c[a.dataType];a.success.call(a.ajax,
c)}};return c};g.xhr.getJSONP=function(a,c,l){var j=i.head||i.getElementsByTagName("head")[0]||i.documentElement,s=i.createElement("script"),t=false,y=[];y=/(=)\?(?=&|$)|\?\?/;var D,r;if(!l){r=a.match(/(callback=[^&]*)/);if(r!==null&&r.length){y=r[1].split("=")[1];if(y==="?")y="jsonp";D=g.guid(y);a=a.replace(/(callback=[^&]*)/,"callback="+D)}else{D=g.guid("jsonp");if(y.test(a))a=a.replace(y,"$1"+D);y=a.split(/\?(.+)?/);a=y[0]+"?";if(y[1])a+=y[1]+"&";a+="callback="+D}window[D]=function(M){c&&c(M);
t=true}}s.addEventListener("load",function(){l&&c&&c();t&&delete window[D];j.removeChild(s)},false);s.addEventListener("error",function(M){c&&c({error:M});l||delete window[D];j.removeChild(s)},false);s.src=a;j.insertBefore(s,j.firstChild)};g.getJSONP=g.xhr.getJSONP;g.getScript=g.xhr.getScript=function(a,c){return g.xhr.getJSONP(a,c,true)};g.util={toSeconds:function(a,c){var l=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,j,s,t;if(typeof a==="number")return a;typeof a==="string"&&!l.test(a)&&g.error("Invalid time format");
l=a.split(":");j=l.length-1;s=l[j];if(s.indexOf(";")>-1){s=s.split(";");t=0;if(c&&typeof c==="number")t=parseFloat(s[1],10)/c;l[j]=parseInt(s[0],10)+t}j=l[0];return{1:parseFloat(j,10),2:parseInt(j,10)*60+parseFloat(l[1],10),3:parseInt(j,10)*3600+parseInt(l[1],10)*60+parseFloat(l[2],10)}[l.length||1]}};g.p.cue=g.p.exec;g.protect={natives:function(a){return Object.keys?Object.keys(a):function(c){var l,j=[];for(l in c)u.call(c,l)&&j.push(l);return j}(a)}(g.p).map(function(a){return a.toLowerCase()})};
g.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,c){var l=g.p[c];g.p[c]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+c+"', "+(a==null?"do not use.":"use '"+a+"' instead."));g.p[c]=l}return g.p[a].apply(this,[].slice.call(arguments))}});m.Popcorn=g}else{m.Popcorn={isSupported:false};for(f="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);f.length;)m.Popcorn[f.shift()]=
function(){}}})(window,window.document);(function(m,i){function k(f){f=typeof f==="string"?f:[f.language,f.region].join("-");var h=f.split("-");return{iso6391:f,language:h[0]||"",region:h[1]||""}}var d=m.navigator,b=k(d.userLanguage||d.language);i.locale={get:function(){return b},set:function(f){b=k(f);i.locale.broadcast();return b},broadcast:function(f){var h=i.instances,e=h.length,n=0,u;for(f=f||"locale:changed";n<e;n++){u=h[n];f in u.data.events&&u.trigger(f)}}}})(this,this.Popcorn);(function(m){var i=Object.prototype.hasOwnProperty;m.parsers={};m.parser=function(k,d,b){if(m.protect.natives.indexOf(k.toLowerCase())>=0)m.error("'"+k+"' is a protected function name");else{if(typeof d==="function"&&!b){b=d;d=""}if(!(typeof b!=="function"||typeof d!=="string")){var f={};f[k]=function(h,e,n){if(!h)return this;if(typeof e!=="function"&&!n){n=e;e=null}var u=this;m.xhr({url:h,dataType:d,success:function(q){var v,w,o=0;q=b(q,n).data||[];if(v=q.length){for(;o<v;o++){w=q[o];for(var z in w)i.call(w,
z)&&u[z]&&u[z](w[z])}e&&e()}}});return this};m.extend(m.p,f);return f}}}})(Popcorn);(function(m){var i=function(k,d){k=k||m.nop;d=d||m.nop;return function(){k.apply(this,arguments);d.apply(this,arguments)}};m.player=function(k,d){if(!m[k]){d=d||{};var b=function(f,h,e){e=e||{};var n=new Date/1E3,u=n,q=0,v=0,w=1,o=false,z={},J=typeof f==="string"?m.dom.find(f):f,E={};Object.prototype.__defineGetter__||(E=J||document.createElement("div"));for(var g in J)if(!(g in E))if(typeof J[g]==="object")E[g]=J[g];else if(typeof J[g]==="function")E[g]=function(A){return"length"in J[A]&&!J[A].call?
J[A]:function(){return J[A].apply(J,arguments)}}(g);else m.player.defineProperty(E,g,{get:function(A){return function(){return J[A]}}(g),set:m.nop,configurable:true});var G=function(){n=new Date/1E3;if(!E.paused){E.currentTime+=n-u;E.dispatchEvent("timeupdate");setTimeout(G,10)}u=n};E.play=function(){this.paused=false;if(E.readyState>=4){u=new Date/1E3;E.dispatchEvent("play");G()}};E.pause=function(){this.paused=true;E.dispatchEvent("pause")};m.player.defineProperty(E,"currentTime",{get:function(){return q},
set:function(A){q=+A;E.dispatchEvent("timeupdate");return q},configurable:true});m.player.defineProperty(E,"volume",{get:function(){return w},set:function(A){w=+A;E.dispatchEvent("volumechange");return w},configurable:true});m.player.defineProperty(E,"muted",{get:function(){return o},set:function(A){o=+A;E.dispatchEvent("volumechange");return o},configurable:true});m.player.defineProperty(E,"readyState",{get:function(){return v},set:function(A){return v=A},configurable:true});E.addEventListener=function(A,
O){z[A]||(z[A]=[]);z[A].push(O);return O};E.removeEventListener=function(A,O){var a,c=z[A];if(c){for(a=z[A].length-1;a>=0;a--)O===c[a]&&c.splice(a,1);return O}};E.dispatchEvent=function(A){var O,a=A.type;if(!a){a=A;if(A=m.events.getInterface(a)){O=document.createEvent(A);O.initEvent(a,true,true,window,1)}}if(z[a])for(A=z[a].length-1;A>=0;A--)z[a][A].call(this,O,this)};E.src=h||"";E.duration=0;E.paused=true;E.ended=0;e&&e.events&&m.forEach(e.events,function(A,O){E.addEventListener(O,A,false)});if(d._canPlayType(J.nodeName,
h)!==false)if(d._setup)d._setup.call(E,e);else{E.readyState=4;E.dispatchEvent("loadedmetadata");E.dispatchEvent("loadeddata");E.dispatchEvent("canplaythrough")}else setTimeout(function(){E.dispatchEvent("error")},0);f=new m.p.init(E,e);if(d._teardown)f.destroy=i(f.destroy,function(){d._teardown.call(E,e)});return f};b.canPlayType=d._canPlayType=d._canPlayType||m.nop;m[k]=m.player.registry[k]=b}};m.player.registry={};m.player.defineProperty=Object.defineProperty||function(k,d,b){k.__defineGetter__(d,
b.get||m.nop);k.__defineSetter__(d,b.set||m.nop)};m.player.playerQueue=function(){var k=[],d=false;return{next:function(){d=false;k.shift();k[0]&&k[0]()},add:function(b){k.push(function(){d=true;b&&b()});!d&&k[0]()}}};m.smart=function(k,d,b){var f=typeof k==="string"?m.dom.find(k):k,h,e,n,u,q,v="HTMLYouTubeVideoElement HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(f){d=typeof d==="string"?[d]:d;k=0;for(q=d.length;k<q;k++){h=d[k];for(e=0;e<v.length;e++)if((u=
m[v[e]])&&u._canPlaySrc(h)==="probably"){n=u(f);b=m(n,b);setTimeout(function(){n.src=h},0);return b}for(var w in m.player.registry)if(m.player.registry.hasOwnProperty(w))if(m.player.registry[w].canPlayType(f.nodeName,h))return m[w](f,h,b)}var o;w=m.guid("popcorn-video-");e=document.createElement("div");e.style.width="100%";e.style.height="100%";if(d.length===1){o=document.createElement("video");o.id=w;f.appendChild(o);setTimeout(function(){var z=document.createElement("div");z.innerHTML=d[0];o.src=
z.firstChild.nodeValue},0);return m("#"+w,b)}f.appendChild(e);v='<video id="'+w+'" preload=auto autobuffer>';k=0;for(q=d.length;k<q;k++)v+='<source src="'+d[k]+'">';v+="</video>";e.innerHTML=v;b&&b.events&&b.events.error&&f.addEventListener("error",b.events.error,false);return m("#"+w,b)}else m.error("Specified target `"+k+"` was not found.")}})(Popcorn);(function(m){document.addEventListener("DOMContentLoaded",function(){var i=document.querySelectorAll("[data-timeline-sources]");m.forEach(i,function(k,d){var b=i[d],f,h,e;if(!b.id)b.id=m.guid("__popcorn");if(b.nodeType&&b.nodeType===1){e=m("#"+b.id);f=(b.getAttribute("data-timeline-sources")||"").split(",");f[0]&&m.forEach(f,function(n){h=n.split("!");if(h.length===1){h=n.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");h[0]="parse"+h[1].toUpperCase();h[1]=n}f[0]&&e[h[0]]&&e[h[0]](h[1])});e.autoplay()&&
e.play()}})},false)})(Popcorn);(function(m,i){function k(b){var f=k.options;b=f.parser[f.strictMode?"strict":"loose"].exec(b);for(var h={},e=14;e--;)h[f.key[e]]=b[e]||"";h[f.q.name]={};h[f.key[12]].replace(f.q.parser,function(n,u,q){if(u)h[f.q.name][u]=q});return h}k.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var d={length:0,start:m.nop,end:m.nop};window.MediaError=window.MediaError||function(){function b(f,h){this.code=f||null;this.message=h||""}b.MEDIA_ERR_NONE_ACTIVE=0;b.MEDIA_ERR_ABORTED=1;b.MEDIA_ERR_NETWORK=2;b.MEDIA_ERR_DECODE=3;b.MEDIA_ERR_NONE_SUPPORTED=4;return b}();m._MediaElementProto=function(){var b=
{},f;Object.prototype.__defineGetter__||(b=i.createElement("div"));b._util={type:"HTML5",TIMEUPDATE_MS:250,MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(h){return typeof h==="string"||h===true},parseUri:k};b.addEventListener=function(h,e,n){i.addEventListener(this._eventNamespace+h,e,n)};b.removeEventListener=function(h,e,n){i.removeEventListener(this._eventNamespace+h,e,n)};b.dispatchEvent=function(h){var e=i.createEvent("CustomEvent");e.initCustomEvent(this._eventNamespace+h,false,false,
{type:h,target:this.parentNode,data:null});i.dispatchEvent(e)};b.load=m.nop;b.canPlayType=function(){return""};b.getBoundingClientRect=function(){return f.getBoundingClientRect()};b.NETWORK_EMPTY=0;b.NETWORK_IDLE=1;b.NETWORK_LOADING=2;b.NETWORK_NO_SOURCE=3;b.HAVE_NOTHING=0;b.HAVE_METADATA=1;b.HAVE_CURRENT_DATA=2;b.HAVE_FUTURE_DATA=3;b.HAVE_ENOUGH_DATA=4;Object.defineProperties(b,{currentSrc:{get:function(){return this.src!==undefined?this.src:""},configurable:true},parentNode:{get:function(){return f},
set:function(h){f=h},configurable:true},preload:{get:function(){return"auto"},set:m.nop,configurable:true},controls:{get:function(){return true},set:m.nop,configurable:true},poster:{get:function(){return""},set:m.nop,configurable:true},crossorigin:{get:function(){return""},configurable:true},played:{get:function(){return d},configurable:true},seekable:{get:function(){return d},configurable:true},buffered:{get:function(){return d},configurable:true},defaultMuted:{get:function(){return false},configurable:true},
defaultPlaybackRate:{get:function(){return 1},configurable:true},style:{get:function(){return this.parentNode.style},configurable:true},id:{get:function(){return this.parentNode.id},configurable:true}});return b}})(Popcorn,window.document);(function(m,i){function k(){return"maybe"}function d(b,f){var h=typeof b==="string"?i.querySelector(b):b,e=i.createElement(f);h.appendChild(e);e._canPlaySrc=k;return e}m.HTMLVideoElement=function(b){return d(b,"video")};m.HTMLVideoElement._canPlaySrc=k;m.HTMLAudioElement=function(b){return d(b,"audio")};m.HTMLAudioElement._canPlaySrc=k})(Popcorn,window.document);(function(m,i,k){function d(){if(i.jwplayer){n=true;for(var v=q.length;v--;){q[v]();delete q[v]}}else setTimeout(d,100)}function b(){if(!u){if(!i.jwplayer){var v=k.createElement("script");v.src="https://jwpsrv.com/library/zaIF4JI9EeK2FSIACpYGxA.js";var w=k.getElementsByTagName("script")[0];w.parentNode.insertBefore(v,w)}u=true;d()}return n}function f(v){q.unshift(v)}function h(v){function w(L){C.unshift(L)}function o(){var L=K.getDuration();if(L==-1||L==undefined)setTimeout(o,0);else{r.duration=L;
y.dispatchEvent("durationchange");M=true;r.readyState=y.HAVE_METADATA;y.dispatchEvent("loadedmetadata");y.dispatchEvent("loadeddata");r.readyState=y.HAVE_FUTURE_DATA;y.dispatchEvent("canplay");for(B=true;C.length;){C[0]();C.shift()}r.readyState=y.HAVE_ENOUGH_DATA;y.dispatchEvent("canplaythrough")}}function z(){if(x)x=false;else if(H){H=false;o()}else l()}function J(){if(r.seeking){r.ended=false;r.seeking=false;y.dispatchEvent("timeupdate");y.dispatchEvent("seeked");y.dispatchEvent("canplay");y.dispatchEvent("canplaythrough")}}
function E(){K.onPause(z);K.onTime(function(){if(!r.ended&&!r.seeking){r.currentTime=K.getPosition();y.dispatchEvent("timeupdate")}});K.onSeek(J);K.onPlay(function(){if(!r.ended)if(S){S=false;if(r.autoplay||!r.paused){r.paused=false;w(a);o()}else{p=H=true;K.pause(true)}}else if(p){p=false;x=true;K.pause(true)}else a()});K.onBufferChange(c);K.onComplete(j);K.play(true)}function g(L){var T={name:"MediaError"};T.message=L.message;T.code=L.code||5;r.error=T;y.dispatchEvent("error")}function G(L){if(y._canPlaySrc(L)){var T=
y._util.parseUri(L).queryKey;r.controls=T.controls=T.controls||r.controls;r.src=L;if(b()){if(M)M&&K&&K.destroy();T={width:"100%",height:"100%",autostart:r.autoplay,controls:r.controls};if(typeof L=="string")T.file=L;else T.sources=L;jwplayer(D.id).setup(T);K=jwplayer(D.id);K.onReady(E);K.onError(g);jwplayer.utils.log=function(F,V){if(typeof console!=="undefined"&&typeof console.log!=="undefined")V?console.log(F,V):console.log(F);F==="No suitable players found and fallback enabled"&&g({message:F,code:4})};
r.networkState=y.NETWORK_LOADING;y.dispatchEvent("loadstart");y.dispatchEvent("progress")}else f(function(){G(L)})}else{r.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};y.dispatchEvent("error")}}function A(L){r.currentTime=L;if(B){O();K.seek(L)}else w(function(){O();K.seek(L)})}function O(){r.seeking=true;if(r.paused)p=true;y.dispatchEvent("seeking")}function a(){r.paused=false;if(M&&N){N=false;if(r.loop&&!R||!r.loop){R=true;y.dispatchEvent("play")}y.dispatchEvent("playing")}}
function c(){y.dispatchEvent("progress")}function l(){r.paused=true;if(!N){N=true;y.dispatchEvent("pause")}}function j(){if(r.loop)A(0);else{r.ended=true;l();y.dispatchEvent("timeupdate");y.dispatchEvent("ended")}}function s(L){r.volume=L;if(B){K.setVolume(r.volume*100);y.dispatchEvent("volumechange")}else w(function(){s(r.volume)})}function t(L){r.muted=L;if(B){K.setMute(L);y.dispatchEvent("volumechange")}else w(function(){t(r.muted)})}if(!i.postMessage)throw"ERROR: HTMLJWPlayerVideoElement requires window.postMessage";
var y=new m._MediaElementProto,D=typeof v==="string"?k.querySelector(v):v,r={src:e,networkState:y.NETWORK_EMPTY,readyState:y.HAVE_NOTHING,seeking:false,autoplay:e,preload:e,controls:false,loop:false,poster:e,volume:1,muted:false,currentTime:0,duration:NaN,ended:false,paused:true,error:null},M=false,x=false,p=false,B=false,R=false,K,N=true,C=[],S=true,H=false;y._eventNamespace=m.guid("HTMLJWPlayerVideoElement::");y.parentNode=D;y._util.type="JWPlayer";y.play=function(){y.dispatchEvent("play");r.paused=
false;if(B){if(r.ended){A(0);r.ended=false}K.play(true)}else w(function(){y.play()})};y.pause=function(){r.paused=true;B?K.pause(true):w(function(){y.pause()})};Object.defineProperties(y,{src:{get:function(){return r.src},set:function(L){L&&L!==r.src&&G(L)}},autoplay:{get:function(){return r.autoplay},set:function(L){r.autoplay=y._util.isAttributeSet(L)}},loop:{get:function(){return r.loop},set:function(L){r.loop=y._util.isAttributeSet(L)}},width:{get:function(){return y.parentNode.offsetWidth}},
height:{get:function(){return y.parentNode.offsetHeight}},currentTime:{get:function(){return r.currentTime},set:function(L){A(L)}},duration:{get:function(){return K.getDuration()}},ended:{get:function(){return r.ended}},paused:{get:function(){return r.paused}},seeking:{get:function(){return r.seeking}},readyState:{get:function(){return r.readyState}},networkState:{get:function(){return r.networkState}},volume:{get:function(){return r.volume},set:function(L){if(L<0||L>1)throw"Volume value must be between 0.0 and 1.0";
s(L)}},muted:{get:function(){return r.muted},set:function(L){t(y._util.isAttributeSet(L))}},error:{get:function(){return r.error}},buffered:{get:function(){return{start:function(L){if(L===0)return 0;throw"INDEX_SIZE_ERR: DOM Exception 1";},end:function(L){if(L===0){L=K.getDuration();if(!L)return 0;return L*(K.getBuffer()/100)}throw"INDEX_SIZE_ERR: DOM Exception 1";},length:1}}}});y._canPlaySrc=m.HTMLJWPlayerVideoElement._canPlaySrc;y.canPlayType=m.HTMLJWPlayerVideoElement.canPlayType;return y}var e=
"",n=false,u=false,q=[];m.HTMLJWPlayerVideoElement=function(v){return new h(v)};m.HTMLJWPlayerVideoElement._canPlaySrc=function(v){if(typeof v=="string"){if(/.+\.+/g.exec(v))return"probably"}else return"probably"};m.HTMLJWPlayerVideoElement.canPlayType=function(){return"probably"}})(Popcorn,window,document);(function(m,i){function k(h){this.startTime=0;this.currentTime=h.currentTime||0;this.duration=h.duration||NaN;this.playInterval=null;this.paused=true;this.playbackRate=this.defaultPlaybackRate=1;this.ended=h.endedCallback||m.nop}function d(h){function e(a){A.push(a)}function n(){if(!E)return 0;return g.currentTime}function u(a){if(a!==n())if(E){G.seeking=true;o.dispatchEvent("seeking");g.seekTo(a);G.ended=false;G.seeking=false;o.dispatchEvent("timeupdate");o.dispatchEvent("seeked");o.dispatchEvent("canplay");
o.dispatchEvent("canplaythrough")}else e(function(){u(a)})}function q(){o.dispatchEvent("timeupdate")}function v(){G.paused=true;clearInterval(O);o.dispatchEvent("pause")}function w(){if(G.loop){u(0);o.play()}else{G.ended=true;v();o.dispatchEvent("timeupdate");o.dispatchEvent("ended")}}var o=new m._MediaElementProto,z=typeof h==="string"?i.querySelector(h):h,J=i.createElement("div"),E=false,g,G={src:b,networkState:o.NETWORK_EMPTY,readyState:o.HAVE_NOTHING,autoplay:b,preload:b,controls:b,loop:false,
poster:b,volume:1,muted:false,width:z.width|0?z.width:o._util.MIN_WIDTH,height:z.height|0?z.height:o._util.MIN_HEIGHT,seeking:false,ended:false,paused:1,error:null},A=[],O;o._eventNamespace=m.guid("HTMLNullVideoElement::");o.parentNode=z;o._util.type="NullVideo";o.play=function(){if(E){g.play();if(G.paused){if(G.paused===1){G.paused=false;o.dispatchEvent("play");o.dispatchEvent("playing")}else{if(G.ended){u(0);G.ended=false}if(G.paused){G.paused=false;G.loop||o.dispatchEvent("play");o.dispatchEvent("playing")}}O=
setInterval(q,o._util.TIMEUPDATE_MS)}}else e(function(){o.play()})};o.pause=function(){if(E){g.pause();G.paused||v()}else e(function(){o.pause()})};Object.defineProperties(o,{src:{get:function(){return G.src},set:function(a){if(a&&a!==G.src)if(o._canPlaySrc(a)){G.src=a;if(E)if(E&&g){g.pause();g=null;z.removeChild(J);J=i.createElement("div")}J.width=G.width;J.height=G.height;z.appendChild(J);a=f.exec(a);g=new k({currentTime:+a[1],duration:+a[2],endedCallback:w});o.dispatchEvent("loadstart");o.dispatchEvent("progress");
o.dispatchEvent("durationchange");E=true;G.networkState=o.NETWORK_IDLE;G.readyState=o.HAVE_METADATA;o.dispatchEvent("loadedmetadata");o.dispatchEvent("loadeddata");G.readyState=o.HAVE_FUTURE_DATA;o.dispatchEvent("canplay");G.readyState=o.HAVE_ENOUGH_DATA;for(o.dispatchEvent("canplaythrough");A.length;){a=A.shift();a()}G.autoplay&&o.play()}else{G.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};o.dispatchEvent("error")}}},autoplay:{get:function(){return G.autoplay},
set:function(a){G.autoplay=o._util.isAttributeSet(a)}},loop:{get:function(){return G.loop},set:function(a){G.loop=o._util.isAttributeSet(a)}},width:{get:function(){return J.width},set:function(a){J.width=a;G.width=J.width}},height:{get:function(){return J.height},set:function(a){J.height=a;G.height=J.height}},currentTime:{get:function(){return n()},set:function(a){u(a)}},duration:{get:function(){return g?g.duration:NaN}},ended:{get:function(){return G.ended}},paused:{get:function(){return G.paused}},
seeking:{get:function(){return G.seeking}},readyState:{get:function(){return G.readyState}},networkState:{get:function(){return G.networkState}},volume:{get:function(){return G.volume},set:function(a){if(a<0||a>1)throw"Volume value must be between 0.0 and 1.0";G.volume=a;o.dispatchEvent("volumechange")}},muted:{get:function(){return G.muted},set:function(a){a=o._util.isAttributeSet(a);G.muted=a;o.dispatchEvent("volumechange")}},playbackRate:{get:function(){return g.playbackRate},set:function(a){g.playbackRate=
a;o.dispatchEvent("ratechange")}},error:{get:function(){return G.error}}});o._canPlaySrc=m.HTMLNullVideoElement._canPlaySrc;o.canPlayType=m.HTMLNullVideoElement.canPlayType;return o}var b="",f=/#t=(\d+\.?\d*)?,?(\d+\.?\d*)/;k.prototype={play:function(){var h=this;if(this.paused){this.paused=false;this.startTime=Date.now();this.playInterval=setInterval(function(){h.currentTime+=(Date.now()-h.startTime)/(1E3/h.playbackRate);h.startTime=Date.now();if(h.currentTime>=h.duration){h.pause(h.duration);h.ended()}h.currentTime<
0&&h.pause(0)},16)}},pause:function(){if(!this.paused){this.paused=true;clearInterval(this.playInterval)}},seekTo:function(h){h=h<0?0:h;this.currentTime=h=h>this.duration?this.duration:h}};m.HTMLNullVideoElement=function(h){return new d(h)};m.HTMLNullVideoElement._canPlaySrc=function(h){return f.test(h)?"probably":b};m.HTMLNullVideoElement.canPlayType=function(h){return h==="video/x-nullvideo"?"probably":b}})(Popcorn,document);(function(m,i,k){function d(){if(!u){m.getScript("https://w.soundcloud.com/player/api.js",function(){m.getScript("https://connect.soundcloud.com/sdk.js",function(){n=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});for(var v=q.length;v--;){q[v]();delete q[v]}})});u=true}return n}function b(v){q.unshift(v)}function f(v){function w(C){B.unshift(C)}function o(){p.bind(SC.Widget.Events.LOAD_PROGRESS,function(C){O({type:"loadProgress",data:C.currentPosition/1E3})});p.bind(SC.Widget.Events.PLAY_PROGRESS,
function(C){O({type:"playProgress",data:C.currentPosition/1E3})});p.bind(SC.Widget.Events.PLAY,function(){O({type:"play"})});p.bind(SC.Widget.Events.PAUSE,function(){O({type:"pause"})});p.bind(SC.Widget.Events.SEEK,function(){p.getPosition(function(C){C=C/1E3;if(r.seeking)if(Math.floor(C)!==Math.floor(r.currentTime))p.seekTo(r.currentTime*1E3);else{r.ended=false;r.seeking=false;t.dispatchEvent("timeupdate");t.dispatchEvent("seeked");t.dispatchEvent("canplay");t.dispatchEvent("canplaythrough")}else O({type:"seek",
data:C})})});p.bind(SC.Widget.Events.FINISH,function(){O({type:"finish"})});M=true;p.getDuration(J)}function z(){p.bind(SC.Widget.Events.PLAY_PROGRESS,function(C){p.setVolume(0);if(C.currentPosition>0){p.unbind(SC.Widget.Events.PLAY_PROGRESS);p.bind(SC.Widget.Events.PAUSE,function(){p.unbind(SC.Widget.Events.PAUSE);p.setVolume(1);p.bind(SC.Widget.Events.SEEK,function(){p.unbind(SC.Widget.Events.SEEK);o()});p.seekTo(0)});p.pause()}});p.play()}function J(C){C/=1E3;var S=r.duration;if(S!==C){r.duration=
C;t.dispatchEvent("durationchange");if(isNaN(S)){r.networkState=t.NETWORK_IDLE;r.readyState=t.HAVE_METADATA;t.dispatchEvent("loadedmetadata");t.dispatchEvent("loadeddata");r.readyState=t.HAVE_FUTURE_DATA;t.dispatchEvent("canplay");r.readyState=t.HAVE_ENOUGH_DATA;t.dispatchEvent("canplaythrough");for(C=B.length;C--;){B[C]();delete B[C]}r.paused&&r.autoplay&&t.play()}}}function E(C){function S(){r.seeking=true;t.dispatchEvent("seeking");p.seekTo(C)}r.currentTime=C;C*=1E3;M?S():addMediaReadyCallback(S)}
function g(){r.paused=true;if(!x){x=true;clearInterval(R);t.dispatchEvent("pause")}}function G(){t.dispatchEvent("timeupdate")}function A(C){r.currentTime=C;C!==N&&t.dispatchEvent("timeupdate");N=C}function O(C){switch(C.type){case "loadProgress":t.dispatchEvent("progress");break;case "playProgress":A(C.data);break;case "play":if(!K){K=setInterval(a,h);r.loop&&t.dispatchEvent("play")}R=setInterval(G,t._util.TIMEUPDATE_MS);r.paused=false;if(x){x=false;r.loop||t.dispatchEvent("play");t.dispatchEvent("playing")}break;
case "pause":g();break;case "finish":if(r.loop){E(0);t.play()}else{r.ended=true;t.pause();g();t.dispatchEvent("timeupdate");t.dispatchEvent("ended")}break;case "seek":A(C.data)}}function a(){r.ended||p.getPosition(function(C){A(C/1E3)})}function c(C){if(t._canPlaySrc(C)){r.src=C;if(M)if(M&&p){clearInterval(K);p.pause();p.unbind(SC.Widget.Events.READY);p.unbind(SC.Widget.Events.LOAD_PROGRESS);p.unbind(SC.Widget.Events.PLAY_PROGRESS);p.unbind(SC.Widget.Events.PLAY);p.unbind(SC.Widget.Events.PAUSE);
p.unbind(SC.Widget.Events.SEEK);p.unbind(SC.Widget.Events.FINISH);y.removeChild(D);D=k.createElement("iframe")}if(d()){M=false;SC.get("/resolve",{url:C},function(S){var H;if(S.errors){H={name:"MediaError"};if(S.errors[0])if(S.errors[0].error_message==="404 - Not Found"){H.message="Video not found.";H.code=MediaError.MEDIA_ERR_NETWORK}r.error=H;t.dispatchEvent("error")}D.id=m.guid("soundcloud-");D.width=r.width;D.height=r.height;D.frameBorder=0;D.webkitAllowFullScreen=true;D.mozAllowFullScreen=true;
D.allowFullScreen=true;s(r.controls);y.appendChild(D);D.onload=function(){D.onload=null;p=SC.Widget(D);p.bind(SC.Widget.Events.READY,z);r.networkState=t.NETWORK_LOADING;t.dispatchEvent("loadstart");t.dispatchEvent("progress")};D.src="https://w.soundcloud.com/player/?url="+S.uri+"&show_artwork=false&buying=false&liking=false&sharing=false&download=false&show_comments=false&show_user=false&single_active=false"})}else b(function(){c(C)})}else{r.error={name:"MediaError",message:"Media Source Not Supported",
code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};t.dispatchEvent("error")}}function l(C){r.volume=C;if(M){p.setVolume(C);t.dispatchEvent("volumechange")}else w(function(){l(C)})}function j(C){if(M)if(C){r.muted=r.volume;l(0)}else{r.muted=0;l(r.muted)}else{r.muted=C?1:0;w(function(){j(C)})}}function s(C){if(M){D.style.position="absolute";D.style.visibility=C?"visible":"hidden"}else{D.style.opacity=C?"1":"0";D.style.pointerEvents=C?"auto":"none"}r.controls=C}if(!i.postMessage)throw"ERROR: HTMLSoundCloudAudioElement requires window.postMessage";
var t=new m._MediaElementProto,y=typeof v==="string"?m.dom.find(v):v,D=k.createElement("iframe"),r={src:e,networkState:t.NETWORK_EMPTY,readyState:t.HAVE_NOTHING,seeking:false,autoplay:e,preload:e,controls:false,loop:false,poster:e,volume:1,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,width:y.width|0?y.width:t._util.MIN_WIDTH,height:y.height|0?y.height:t._util.MIN_HEIGHT,error:null},M=false,x=true,p,B=[],R,K,N=0;t._eventNamespace=m.guid("HTMLSoundCloudAudioElement::");t.parentNode=y;
t._util.type="SoundCloud";t.play=function(){r.paused=false;if(M){r.ended&&E(0);p.play()}else w(function(){t.play()})};t.pause=function(){r.paused=true;M?p.pause():w(function(){t.pause()})};Object.defineProperties(t,{src:{get:function(){return r.src},set:function(C){C&&C!==r.src&&c(C)}},autoplay:{get:function(){return r.autoplay},set:function(C){r.autoplay=t._util.isAttributeSet(C)}},loop:{get:function(){return r.loop},set:function(C){r.loop=t._util.isAttributeSet(C)}},width:{get:function(){return D.width},
set:function(C){D.width=C;r.width=D.width}},height:{get:function(){return D.height},set:function(C){D.height=C;r.height=D.height}},currentTime:{get:function(){return r.currentTime},set:function(C){E(C)}},duration:{get:function(){return r.duration}},ended:{get:function(){return r.ended}},paused:{get:function(){return r.paused}},seeking:{get:function(){return r.seeking}},readyState:{get:function(){return r.readyState}},networkState:{get:function(){return r.networkState}},volume:{get:function(){return r.muted>
0?r.muted:r.volume},set:function(C){if(C<0||C>1)throw"Volume value must be between 0.0 and 1.0";l(C)}},muted:{get:function(){return r.muted>0},set:function(C){j(t._util.isAttributeSet(C))}},error:{get:function(){return r.error}},controls:{get:function(){return r.controls},set:function(C){s(!!C)}}});t._canPlaySrc=m.HTMLSoundCloudAudioElement._canPlaySrc;t.canPlayType=m.HTMLSoundCloudAudioElement.canPlayType;return t}var h=16,e="",n=false,u=false,q=[];m.HTMLSoundCloudAudioElement=function(v){return new f(v)};
m.HTMLSoundCloudAudioElement._canPlaySrc=function(v){return/(?:https?:\/\/www\.|https?:\/\/|www\.|\.|^)(soundcloud)/.test(v)?"probably":e};m.HTMLSoundCloudAudioElement.canPlayType=function(v){return v==="audio/x-soundcloud"?"probably":e}})(Popcorn,window,document);(function(m,i,k){function d(n){var u=this,q=n.src.split("?")[0];if(q.substr(0,2)==="//")q=i.location.protocol+q;"play pause paused seekTo unload getCurrentTime getDuration getVideoEmbedCode getVideoHeight getVideoWidth getVideoUrl getColor setColor setLoop getVolume setVolume addEventListener".split(" ").forEach(function(v){u[v]=function(w){w=JSON.stringify({method:v,value:w});n.contentWindow&&n.contentWindow.postMessage(w,q)}})}function b(n){function u(x){y.unshift(x)}function q(x){var p=c.duration;
if(p!==x){c.duration=x;A.dispatchEvent("durationchange");if(isNaN(p)){c.networkState=A.NETWORK_IDLE;c.readyState=A.HAVE_METADATA;A.dispatchEvent("loadedmetadata");A.dispatchEvent("loadeddata");c.readyState=A.HAVE_FUTURE_DATA;A.dispatchEvent("canplay");c.readyState=A.HAVE_ENOUGH_DATA;A.dispatchEvent("canplaythrough");c.autoplay&&A.play();for(x=y.length;x--;){y[x]();delete y[x]}}}}function v(x){if(l){c.seeking=true;A.dispatchEvent("seeking");s.seekTo(x)}else u(function(){v(x)})}function w(){A.dispatchEvent("timeupdate")}
function o(x){(c.currentTime=x)!==M&&A.dispatchEvent("timeupdate");M=c.currentTime}function z(x){if(x.origin===e){var p;try{p=JSON.parse(x.data)}catch(B){console.warn(B)}if(p.player_id==j)switch(p.event){case "ready":s=new d(a);s.addEventListener("loadProgress");s.addEventListener("pause");s.setVolume(0);s.play();break;case "loadProgress":if(parseFloat(p.data.duration)>0&&!l){l=true;s.pause()}break;case "pause":s.setVolume(1);i.removeEventListener("message",z,false);i.addEventListener("message",J,
false);s.addEventListener("loadProgress");s.addEventListener("playProgress");s.addEventListener("play");s.addEventListener("pause");s.addEventListener("finish");s.addEventListener("seek");s.getDuration();c.networkState=A.NETWORK_LOADING;A.dispatchEvent("loadstart");A.dispatchEvent("progress")}}}function J(x){if(x.origin===e){var p;try{p=JSON.parse(x.data)}catch(B){console.warn(B)}if(p.player_id==j){switch(p.method){case "getCurrentTime":o(parseFloat(p.value));break;case "getDuration":q(parseFloat(p.value));
break;case "getVolume":x=parseFloat(p.value);if(c.volume!==x){c.volume=x;A.dispatchEvent("volumechange")}}switch(p.event){case "loadProgress":A.dispatchEvent("progress");q(parseFloat(p.data.duration));break;case "playProgress":o(parseFloat(p.data.seconds));break;case "play":c.ended&&v(0);if(!r){r=setInterval(E,f);c.loop&&A.dispatchEvent("play")}D=setInterval(w,A._util.TIMEUPDATE_MS);c.paused=false;if(t){t=false;c.loop||A.dispatchEvent("play");A.dispatchEvent("playing")}break;case "pause":c.paused=
true;if(!t){t=true;clearInterval(D);A.dispatchEvent("pause")}break;case "finish":if(c.loop){v(0);A.play()}else{c.ended=true;A.dispatchEvent("ended")}break;case "seek":o(parseFloat(p.data.seconds));c.seeking=false;A.dispatchEvent("timeupdate");A.dispatchEvent("seeked");A.dispatchEvent("canplay");A.dispatchEvent("canplaythrough")}}}}function E(){s.getCurrentTime()}function g(x){c.volume=x;if(l){s.setVolume(x);A.dispatchEvent("volumechange")}else u(function(){g(x)})}function G(x){if(l)if(x){c.muted=
c.volume;g(0)}else{c.muted=0;g(c.muted)}else{c.muted=x?1:0;u(function(){G(x)})}}if(!i.postMessage)throw"ERROR: HTMLVimeoVideoElement requires window.postMessage";var A=new m._MediaElementProto,O=typeof n==="string"?m.dom.find(n):n,a=k.createElement("iframe"),c={src:h,networkState:A.NETWORK_EMPTY,readyState:A.HAVE_NOTHING,seeking:false,autoplay:h,preload:h,controls:false,loop:false,poster:h,volume:1,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,error:null},l=false,j=m.guid(),s,t=true,
y=[],D,r,M=0;A._eventNamespace=m.guid("HTMLVimeoVideoElement::");A.parentNode=O;A._util.type="Vimeo";A.play=function(){c.paused=false;l?s.play():u(function(){A.play()})};A.pause=function(){c.paused=true;l?s.pause():u(function(){A.pause()})};Object.defineProperties(A,{src:{get:function(){return c.src},set:function(x){if(x&&x!==c.src)if(A._canPlaySrc(x)){c.src=x;if(l)if(l&&s){clearInterval(r);s.pause();i.removeEventListener("message",J,false);O.removeChild(a);a=k.createElement("iframe")}l=false;x=A._util.parseUri(x);
var p=x.queryKey,B,R=["api=1","player_id="+j,"title=0","byline=0","portrait=0"];c.loop=p.loop==="1"||c.loop;delete p.loop;c.autoplay=p.autoplay==="1"||c.autoplay;delete p.autoplay;x=e+"/video/"+/\d+$/.exec(x.path)+"?";for(B in p)p.hasOwnProperty(B)&&R.push(encodeURIComponent(B)+"="+encodeURIComponent(p[B]));x+=R.join("&");a.id=j;a.style.width="100%";a.style.height="100%";a.frameBorder=0;a.webkitAllowFullScreen=true;a.mozAllowFullScreen=true;a.allowFullScreen=true;O.appendChild(a);a.src=x;i.addEventListener("message",
z,false)}else{c.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};A.dispatchEvent("error")}}},autoplay:{get:function(){return c.autoplay},set:function(x){c.autoplay=A._util.isAttributeSet(x)}},loop:{get:function(){return c.loop},set:function(x){c.loop=A._util.isAttributeSet(x)}},width:{get:function(){return A.parentNode.offsetWidth}},height:{get:function(){return A.parentNode.offsetHeight}},currentTime:{get:function(){return c.currentTime},
set:function(x){v(x)}},duration:{get:function(){return c.duration}},ended:{get:function(){return c.ended}},paused:{get:function(){return c.paused}},seeking:{get:function(){return c.seeking}},readyState:{get:function(){return c.readyState}},networkState:{get:function(){return c.networkState}},volume:{get:function(){return c.muted>0?c.muted:c.volume},set:function(x){if(x<0||x>1)throw"Volume value must be between 0.0 and 1.0";g(x)}},muted:{get:function(){return c.muted>0},set:function(x){G(A._util.isAttributeSet(x))}},
error:{get:function(){return c.error}}});A._canPlaySrc=m.HTMLVimeoVideoElement._canPlaySrc;A.canPlayType=m.HTMLVimeoVideoElement.canPlayType;return A}var f=16,h="",e="https://player.vimeo.com";m.HTMLVimeoVideoElement=function(n){return new b(n)};m.HTMLVimeoVideoElement._canPlaySrc=function(n){return/player.vimeo.com\/video\/\d+/.test(n)||/vimeo.com\/\d+/.test(n)?"probably":h};m.HTMLVimeoVideoElement.canPlayType=function(n){return n==="video/x-vimeo"?"probably":h}})(Popcorn,window,document);(function(m,i,k){function d(){var z;if(YT.loaded)for(v=true;o.length;){z=o.shift();z()}else setTimeout(d,250)}function b(){var z;if(!w){if(i.YT)d();else{z=k.createElement("script");z.addEventListener("load",d,false);z.src="https://www.youtube.com/iframe_api";k.head.appendChild(z)}w=true}return v}function f(z){o.push(z)}function h(z){function J(I){W.push(I)}function E(){Q.pauseVideo();j("play",E);l("play",K)}function g(){l("pause",N);j("pause",g)}function G(){var I=function(){if(Q.isMuted()){l("play",
c);Q.playVideo()}else setTimeout(I,0)};V=true;Q.mute();I()}function A(I){var P={name:"MediaError"};switch(I.data){case 2:P.message="Invalid video parameter.";P.code=MediaError.MEDIA_ERR_ABORTED;break;case 5:P.message="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.";P.code=MediaError.MEDIA_ERR_DECODE;case 100:P.message="Video not found.";P.code=MediaError.MEDIA_ERR_NETWORK;break;case 101:case 150:P.message="Video not usable.";P.code=
MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:P.message="Unknown error.";P.code=5}F.error=P;H.dispatchEvent("error")}function O(){l("play",K);l("pause",N);if(F.autoplay||!F.paused){j("play",O);F.paused=false;J(function(){F.paused||K()})}F.muted||Q.unMute();F.readyState=H.HAVE_METADATA;H.dispatchEvent("loadedmetadata");$=setInterval(r,e);H.dispatchEvent("loadeddata");F.readyState=H.HAVE_FUTURE_DATA;H.dispatchEvent("canplay");U=true;for(aa=setInterval(M,50);W.length;){W[0]();W.shift()}F.readyState=
H.HAVE_ENOUGH_DATA;H.dispatchEvent("canplaythrough")}function a(){j("pause",a);if(Q.getCurrentTime()>0)setTimeout(a,0);else if(F.autoplay||!F.paused){l("play",O);Q.playVideo()}else O()}function c(){j("play",c);if(Q.getCurrentTime()===0)setTimeout(c,0);else{l("pause",a);Q.seekTo(0);Q.pauseVideo()}}function l(I,P){H.addEventListener("youtube-"+I,P,false)}function j(I,P){H.removeEventListener("youtube-"+I,P,false)}function s(I){H.dispatchEvent("youtube-"+I)}function t(){F.networkState=H.NETWORK_LOADING;
var I=Q.getDuration();if(F.duration!==I){F.duration=I;H.dispatchEvent("durationchange")}H.dispatchEvent("waiting")}function y(I){switch(I.data){case YT.PlayerState.ENDED:s("ended");break;case YT.PlayerState.PLAYING:s("play");break;case YT.PlayerState.PAUSED:Q.getDuration()!==Q.getCurrentTime()&&s("pause");break;case YT.PlayerState.BUFFERING:s("buffering")}I.data!==YT.PlayerState.BUFFERING&&ba===YT.PlayerState.BUFFERING&&H.dispatchEvent("progress");ba=I.data}function D(I){if(H._canPlaySrc(I)){F.src=
I;if(b()){if(V)if(U){if(V&&Q){j("buffering",t);j("ended",C);j("play",K);j("pause",N);N();Y=U=false;F.currentTime=0;W=[];clearInterval($);clearInterval(aa);Q.stopVideo();Q.clearVideo();Q.destroy();T=k.createElement("div")}}else{J(function(){D(I)});return}L.appendChild(T);var P=H._util.parseUri(I).queryKey;delete P.v;F.autoplay=P.autoplay==="1"||F.autoplay;delete P.autoplay;F.loop=P.loop==="1"||F.loop;delete P.loop;P.rel=P.rel||0;P.modestbranding=P.modestbranding||1;P.iv_load_policy=P.iv_load_policy||
3;P.disablekb=P.disablekb||1;P.showinfo=P.showinfo||0;var da=i.location.protocol==="file:"?"*":i.location.protocol+"//"+i.location.host;P.origin=P.origin||da;P.controls=P.controls||F.controls?2:0;F.controls=P.controls;P.wmode=P.wmode||"opaque";if(P.html5!==0)P.html5=1;I=u.exec(I)[1];Q=new YT.Player(T,{width:"100%",height:"100%",wmode:P.wmode,videoId:I,playerVars:P,events:{onReady:G,onError:A,onStateChange:y}});F.networkState=H.NETWORK_LOADING;H.dispatchEvent("loadstart");H.dispatchEvent("progress")}else f(function(){D(I)})}else{F.error=
{name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};H.dispatchEvent("error")}}function r(){var I=Q.getCurrentTime();if(F.seeking)q(I-F.currentTime)<1&&R();else{if(q(F.currentTime-I)>e){B();R()}F.currentTime=I}}function M(){var I=Q.getVideoLoadedFraction();if(I&&Z!==I){Z=I;H.dispatchEvent("progress")}}function x(I){if(I!==F.currentTime){F.currentTime=I;if(U){B();Q.seekTo(I)}else J(function(){B();Q.seekTo(I)})}}function p(){H.dispatchEvent("timeupdate")}
function B(){l("pause",g);j("pause",N);F.seeking=true;H.dispatchEvent("seeking")}function R(){F.ended=false;F.seeking=false;H.dispatchEvent("timeupdate");H.dispatchEvent("seeked");H.dispatchEvent("canplay");H.dispatchEvent("canplaythrough")}function K(){if(F.ended){x(0);F.ended=false}ca=setInterval(p,H._util.TIMEUPDATE_MS);F.paused=false;if(X){X=false;if(F.loop&&!Y||!F.loop){Y=true;H.dispatchEvent("play")}H.dispatchEvent("playing")}}function N(){F.paused=true;if(!X){X=true;clearInterval(ca);H.dispatchEvent("pause")}}
function C(){if(F.loop){x(0);H.play()}else{F.ended=true;N();l("play",E);j("play",K);H.dispatchEvent("timeupdate");H.dispatchEvent("ended")}}function S(I){F.muted=I;if(U){Q[I?"mute":"unMute"]();H.dispatchEvent("volumechange")}else J(function(){S(F.muted)})}if(!i.postMessage)throw"ERROR: HTMLYouTubeVideoElement requires window.postMessage";var H=new m._MediaElementProto,L=typeof z==="string"?k.querySelector(z):z,T=k.createElement("div"),F={src:n,networkState:H.NETWORK_EMPTY,readyState:H.HAVE_NOTHING,
seeking:false,autoplay:n,preload:n,controls:false,loop:false,poster:n,volume:1,muted:false,currentTime:0,duration:NaN,ended:false,paused:true,error:null},V=false,U=false,Y=false,Q,X=true,W=[],ba=-1,aa,Z=0,$,ca;H._eventNamespace=m.guid("HTMLYouTubeVideoElement::");H.parentNode=L;H._util.type="YouTube";l("buffering",t);l("ended",C);H.play=function(){F.paused=false;U?Q.playVideo():J(function(){H.play()})};H.pause=function(){F.paused=true;if(U){g();Q.pauseVideo()}else J(function(){H.pause()})};Object.defineProperties(H,
{src:{get:function(){return F.src},set:function(I){I&&I!==F.src&&D(I)}},autoplay:{get:function(){return F.autoplay},set:function(I){F.autoplay=H._util.isAttributeSet(I)}},loop:{get:function(){return F.loop},set:function(I){F.loop=H._util.isAttributeSet(I)}},width:{get:function(){return H.parentNode.offsetWidth}},height:{get:function(){return H.parentNode.offsetHeight}},currentTime:{get:function(){return F.currentTime},set:function(I){x(I)}},duration:{get:function(){return F.duration}},ended:{get:function(){return F.ended}},
paused:{get:function(){return F.paused}},seeking:{get:function(){return F.seeking}},readyState:{get:function(){return F.readyState}},networkState:{get:function(){return F.networkState}},volume:{get:function(){return F.volume},set:function(I){if(I<0||I>1)throw"Volume value must be between 0.0 and 1.0";F.volume=I;if(U){Q.setVolume(F.volume*100);H.dispatchEvent("volumechange")}else J(function(){H.volume=I})}},muted:{get:function(){return F.muted},set:function(I){S(H._util.isAttributeSet(I))}},error:{get:function(){return F.error}},
buffered:{get:function(){return{start:function(I){if(I===0)return 0;throw"INDEX_SIZE_ERR: DOM Exception 1";},end:function(I){if(I===0){if(!F.duration)return 0;return F.duration*Z}throw"INDEX_SIZE_ERR: DOM Exception 1";},length:1}},configurable:true}});H._canPlaySrc=m.HTMLYouTubeVideoElement._canPlaySrc;H.canPlayType=m.HTMLYouTubeVideoElement.canPlayType;return H}var e=10,n="",u=/^.*(?:\/|v=)(.{11})/,q=Math.abs,v=false,w=false,o=[];m.HTMLYouTubeVideoElement=function(z){return new h(z)};m.HTMLYouTubeVideoElement._canPlaySrc=
function(z){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu).*(?:\/|v=)(.{11})/.test(z)?"probably":n};m.HTMLYouTubeVideoElement.canPlayType=function(z){return z==="video/x-youtube"?"probably":n}})(Popcorn,window,document);(function(m){var i=function(k,d){var b=0,f=0,h;m.forEach(d.classes,function(e,n){h=[];if(e==="parent")h[0]=document.querySelectorAll("#"+d.target)[0].parentNode;else h=document.querySelectorAll("#"+d.target+" "+e);b=0;for(f=h.length;b<f;b++)h[b].classList.toggle(n)})};m.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(k){k.classes={};k.applyclass=k.applyclass||"";for(var d=k.applyclass.replace(/\s/g,
"").split(","),b=[],f=0,h=d.length;f<h;f++){b=d[f].split(":");if(b[0])k.classes[b[0]]=b[1]||""}},start:i,end:i})})(Popcorn);(function(m){m.plugin("code",function(i){var k=false,d=this,b=function(){var f=function(h){return function(e,n){var u=function(){k&&e.call(d,n);k&&h(u)};u()}};return window.webkitRequestAnimationFrame?f(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?f(window.mozRequestAnimationFrame):f(function(h){window.setTimeout(h,16)})}();if(!i.onStart||typeof i.onStart!=="function")i.onStart=m.nop;if(i.onEnd&&typeof i.onEnd!=="function")i.onEnd=undefined;if(i.onFrame&&typeof i.onFrame!==
"function")i.onFrame=undefined;return{start:function(f,h){h.onStart.call(d,h);if(h.onFrame){k=true;b(h.onFrame,h)}},end:function(f,h){if(h.onFrame)k=false;h.onEnd&&h.onEnd.call(d,h)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",
optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(m,i){var k={};m.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},
preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(d){function b(){function q(j){d._key=j.api.getId();d._changeView=function(s){d.aid?s.pageSet.showAnnotation(s.api.getAnnotation(d.aid)):s.api.setCurrentPage(d.page)}}function v(){k[d._key]={num:1,id:d._containerId};h.loaded=true}h.loaded=false;var w=d.url.replace(/\.html$/,".js"),
o=d.target,z=i.getElementById(o),J=i.createElement("div"),E=m.position(z),g=d.width||E.width;E=d.height||E.height;var G=d.sidebar||true,A=d.text||true,O=d.pdf||true,a=d.showAnnotations||true,c=d.zoom||700,l=d.search||true;if(!function(j){var s=false;m.forEach(h.viewers,function(t){if(t.api.getSchema().canonicalURL===j){q(t);t=k[d._key];d._containerId=t.id;t.num+=1;s=true;h.loaded=true}});return s}(d.url)){J.id=d._containerId=m.guid(o);o="#"+J.id;z.appendChild(J);e.trigger("documentready");h.load(w,
{width:g,height:E,sidebar:G,text:A,pdf:O,showAnnotations:a,zoom:c,search:l,container:o,afterLoad:d.page||d.aid?function(j){q(j);d._changeView(j);J.style.visibility="hidden";j.elements.pages.hide();v()}:function(j){q(j);v();J.style.visibility="hidden";j.elements.pages.hide()}})}}function f(){window.DV.loaded?b():setTimeout(f,25)}var h=window.DV=window.DV||{},e=this;if(h.loading)f();else{h.loading=true;h.recordHit="//www.documentcloud.org/pixel.gif";var n=i.createElement("link"),u=i.getElementsByTagName("head")[0];
n.rel="stylesheet";n.type="text/css";n.media="screen";n.href="//s3.documentcloud.org/viewer/viewer-datauri.css";u.appendChild(n);h.loaded=false;m.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){h.loading=false;b()})}d.toString=function(){return d.src||d._natives.manifest.options.src["default"]}},start:function(d,b){var f=i.getElementById(b._containerId),h=DV.viewers[b._key];(b.page||b.aid)&&h&&b._changeView(h);if(f&&h){f.style.visibility="visible";h.elements.pages.show()}},end:function(d,
b){var f=i.getElementById(b._containerId);if(f&&DV.viewers[b._key]){f.style.visibility="hidden";DV.viewers[b._key].elements.pages.hide()}},_teardown:function(d){var b=i.getElementById(d._containerId);if((d=d._key)&&DV.viewers[d]&&--k[d].num===0){for(DV.viewers[d].api.unload();b.hasChildNodes();)b.removeChild(b.lastChild);b.parentNode.removeChild(b)}}})})(Popcorn,window.document);(function(m){var i=0;m.plugin("flickr",function(k){var d,b=document.getElementById(k.target),f,h,e,n,u=k.numberofimages||4,q=k.height||"50px",v=k.width||"50px",w=k.padding||"5px",o=k.border||"0px";d=document.createElement("div");d.id="flickr"+i;d.style.width="100%";d.style.height="100%";d.style.display="none";i++;b&&b.appendChild(d);var z=function(){if(f)setTimeout(function(){z()},5);else{h="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";h+="username="+k.username+"&api_key="+
k.apikey+"&format=json&jsoncallback=flickr";m.getJSONP(h,function(E){f=E.user.nsid;J()})}},J=function(){h="http://api.flickr.com/services/feeds/photos_public.gne?";if(f)h+="id="+f+"&";if(k.tags)h+="tags="+k.tags+"&";h+="lang=en-us&format=json&jsoncallback=flickr";m.xhr.getJSONP(h,function(E){var g=document.createElement("div");g.innerHTML="<p style='padding:"+w+";'>"+E.title+"<p/>";m.forEach(E.items,function(G,A){if(A<u){e=document.createElement("a");e.setAttribute("href",G.link);e.setAttribute("target",
"_blank");n=document.createElement("img");n.setAttribute("src",G.media.m);n.setAttribute("height",q);n.setAttribute("width",v);n.setAttribute("style","border:"+o+";padding:"+w);e.appendChild(n);g.appendChild(e)}else return false});d.appendChild(g)})};if(k.username&&k.apikey)z();else{f=k.userid;J()}k.toString=function(){return k.tags||k.username||"Flickr"};return{start:function(){d.style.display="inline"},end:function(){d.style.display="none"},_teardown:function(E){document.getElementById(E.target)&&
document.getElementById(E.target).removeChild(d)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",
label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(m){m.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(i){var k=m.dom.find(i.target);i._container=document.createElement("div");i._container.style.display="none";i._container.innerHTML=i.text;k.appendChild(i._container)},
start:function(i,k){k._container.style.display="inline"},end:function(i,k){k._container.style.display="none"},_teardown:function(i){var k=m.dom.find(i.target);k&&k.removeChild(i._container)}})})(Popcorn);(function(m){var i=1,k=false;m.plugin("googlefeed",function(d){var b=function(){var n=false,u=0,q=document.getElementsByTagName("link"),v=q.length,w=document.head||document.getElementsByTagName("head")[0],o=document.createElement("link");if(window.GFdynamicFeedControl)k=true;else m.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){k=true});for(;u<v;u++)if(q[u].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css")n=true;if(!n){o.type=
"text/css";o.rel="stylesheet";o.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";w.insertBefore(o,w.firstChild)}};window.google?b():m.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){b()}})});var f=document.createElement("div"),h=document.getElementById(d.target),e=function(){if(k)d.feed=new GFdynamicFeedControl(d.url,f,{vertical:d.orientation.toLowerCase()==="vertical"?true:false,horizontal:d.orientation.toLowerCase()==="horizontal"?
true:false,title:d.title=d.title||"Blog"});else setTimeout(function(){e()},5)};if(!d.orientation||d.orientation.toLowerCase()!=="vertical"&&d.orientation.toLowerCase()!=="horizontal")d.orientation="vertical";f.style.display="none";f.id="_feed"+i;f.style.width="100%";f.style.height="100%";i++;h&&h.appendChild(f);e();d.toString=function(){return d.url||d._natives.manifest.options.url["default"]};return{start:function(){f.setAttribute("style","display:inline")},end:function(){f.setAttribute("style",
"display:none")},_teardown:function(n){document.getElementById(n.target)&&document.getElementById(n.target).removeChild(f);delete n.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",
label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);var googleCallback;
(function(m){function i(e,n,u){e=e.type?e.type.toUpperCase():"HYBRID";var q;if(e==="STAMEN-WATERCOLOR"||e==="STAMEN-TERRAIN"||e==="STAMEN-TONER")q=e.replace("STAMEN-","").toLowerCase();u=new google.maps.Map(u,{mapTypeId:q?q:google.maps.MapTypeId[e],mapTypeControlOptions:{mapTypeIds:[]}});q&&u.mapTypes.set(q,new google.maps.StamenMapType(q));u.getDiv().style.display="none";return u}var k=1,d=false,b=false,f,h;googleCallback=function(e){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&
google.maps.LatLng){f=new google.maps.Geocoder;m.getScript("//maps.stamen.com/js/tile.stamen.js",function(){b=true})}else setTimeout(function(){googleCallback(e)},1)};h=function(){if(document.body){d=true;m.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else setTimeout(function(){h()},1)};m.plugin("googlemap",function(e){var n,u,q,v=document.getElementById(e.target);e.type=e.type||"ROADMAP";e.zoom=e.zoom||1;e.lat=e.lat||0;e.lng=e.lng||0;d||h();n=document.createElement("div");
n.id="actualmap"+k;n.style.width=e.width||"100%";n.style.height=e.height?e.height:v&&v.clientHeight?v.clientHeight+"px":"100%";k++;v&&v.appendChild(n);var w=function(){if(b){if(n)if(e.location)f.geocode({address:e.location},function(o,z){if(n&&z===google.maps.GeocoderStatus.OK){e.lat=o[0].geometry.location.lat();e.lng=o[0].geometry.location.lng();q=new google.maps.LatLng(e.lat,e.lng);u=i(e,q,n)}});else{q=new google.maps.LatLng(e.lat,e.lng);u=i(e,q,n)}}else setTimeout(function(){w()},5)};w();e.toString=
function(){return e.location||(e.lat&&e.lng?e.lat+", "+e.lng:e._natives.manifest.options.location["default"])};return{start:function(o,z){var J=this,E,g=function(){if(u){z._map=u;u.getDiv().style.display="block";google.maps.event.trigger(u,"resize");u.setCenter(q);if(z.zoom&&typeof z.zoom!=="number")z.zoom=+z.zoom;u.setZoom(z.zoom);if(z.heading&&typeof z.heading!=="number")z.heading=+z.heading;if(z.pitch&&typeof z.pitch!=="number")z.pitch=+z.pitch;if(z.type==="STREETVIEW"){u.setStreetView(E=new google.maps.StreetViewPanorama(n,
{position:q,pov:{heading:z.heading=z.heading||0,pitch:z.pitch=z.pitch||0,zoom:z.zoom}}));var G=function(s,t){var y=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var D=J.media.currentTime;if(typeof z.tween==="object"){for(var r=0,M=s.length;r<M;r++){var x=s[r];if(D>=x.interval*(r+1)/1E3&&(D<=x.interval*(r+2)/1E3||D>=x.interval*M/1E3)){l.setPosition(new google.maps.LatLng(x.position.lat,x.position.lng));l.setPov({heading:x.pov.heading||y(x,s[r+1])||0,zoom:x.pov.zoom||0,pitch:x.pov.pitch||
0})}}G(s,s[0].interval)}else{r=0;for(M=s.length;r<M;r++){x=z.interval;if(D>=x*(r+1)/1E3&&(D<=x*(r+2)/1E3||D>=x*M/1E3)){A.setPov({heading:y(s[r],s[r+1])||0,zoom:z.zoom,pitch:z.pitch||0});A.setPosition(O[r])}}G(O,z.interval)}},t)};if(z.location&&typeof z.tween==="string"){var A=E,O=[],a=new google.maps.DirectionsService,c=new google.maps.DirectionsRenderer(A);a.route({origin:z.location,destination:z.tween,travelMode:google.maps.TravelMode.DRIVING},function(s,t){if(t==google.maps.DirectionsStatus.OK){c.setDirections(s);
for(var y=s.routes[0].overview_path,D=0,r=y.length;D<r;D++)O.push(new google.maps.LatLng(y[D].lat(),y[D].lng()));z.interval=z.interval||1E3;G(O,10)}})}else if(typeof z.tween==="object"){var l=E;a=0;for(var j=z.tween.length;a<j;a++){z.tween[a].interval=z.tween[a].interval||1E3;G(z.tween,10)}}}z.onmaploaded&&z.onmaploaded(z,u)}else setTimeout(function(){g()},13)};g()},end:function(){if(u)u.getDiv().style.display="none"},_teardown:function(o){var z=document.getElementById(o.target);z&&z.removeChild(n);
n=u=q=null;o._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",
type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(m){function i(b){function f(){var u=b.getBoundingClientRect(),q=e.getBoundingClientRect();if(q.left!==u.left)e.style.left=u.left+"px";if(q.top!==u.top)e.style.top=u.top+"px"}var h=-1,e=document.createElement("div"),n=getComputedStyle(b).zIndex;e.setAttribute("data-popcorn-helper-container",true);e.style.position="absolute";e.style.zIndex=isNaN(n)?k:n+1;document.body.appendChild(e);return{element:e,start:function(){h=setInterval(f,d)},stop:function(){clearInterval(h);h=-1},destroy:function(){document.body.removeChild(e);
h!==-1&&clearInterval(h)}}}var k=2E3,d=10;m.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",
optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(b){var f=document.createElement("img"),h=document.getElementById(b.target);b.anchor=document.createElement("a");b.anchor.style.position="relative";b.anchor.style.textDecoration="none";b.anchor.style.display="none";if(h)if(["VIDEO","AUDIO"].indexOf(h.nodeName)>-1){b.trackedContainer=i(h);b.trackedContainer.element.appendChild(b.anchor)}else h.appendChild(b.anchor);
f.addEventListener("load",function(){f.style.borderStyle="none";b.anchor.href=b.href||b.src||"#";b.anchor.target="_blank";var e,n;f.style.height=h.style.height;f.style.width=h.style.width;b.anchor.appendChild(f);if(b.text){e=f.height/12+"px";n=document.createElement("div");m.extend(n.style,{color:"black",fontSize:e,fontWeight:"bold",position:"relative",textAlign:"center",width:f.style.width||f.width+"px",zIndex:"10"});n.innerHTML=b.text||"";n.style.top=(f.style.height.replace("px","")||f.height)/
2-n.offsetHeight/2+"px";b.anchor.insertBefore(n,f)}},false);f.src=b.src;b.toString=function(){var e=b.src||b._natives.manifest.options.src["default"],n=e.replace(/.*\//g,"");return n.length?n:e}},start:function(b,f){f.anchor.style.display="inline";f.trackedContainer&&f.trackedContainer.start()},end:function(b,f){f.anchor.style.display="none";f.trackedContainer&&f.trackedContainer.stop()},_teardown:function(b){if(b.trackedContainer)b.trackedContainer.destroy();else b.anchor.parentNode&&b.anchor.parentNode.removeChild(b.anchor)}})})(Popcorn);(function(m){var i=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,k={},d={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(k,void 0,{get:function(){return d[void 0]},set:function(b){d[void 0]=b}});m.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},
caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(b){function f(){function v(){if(n!==
"HTML5"&&!window.Popcorn[n])setTimeout(function(){v()},300);else{b.id=b._container.id;b._container.style.width=b.width+"px";b._container.style.height=b.height+"px";b.popcorn=m.smart("#"+b.id,b.source);n==="HTML5"&&b.popcorn.controls(true);b._container.style.width="0px";b._container.style.height="0px";b._container.style.visibility="hidden";b._container.style.overflow="hidden"}}if(n!=="HTML5"&&!window.Popcorn[n]&&!k[n]){k[n]=true;m.getScript("http://popcornjs.org/code/players/"+n+"/popcorn."+n+".js",
function(){v()})}else v()}function h(){window.Popcorn.player?f():setTimeout(function(){h()},300)}var e=document.getElementById(b.target)||{},n,u,q;if(u=i.exec(b.source)){n=u[1];if(n==="youtu")n="youtube"}else n="HTML5";b._type=n;b._container=document.createElement("div");u=b._container;u.id="mediaSpawnerdiv-"+m.guid();b.width=b.width||400;b.height=b.height||200;if(b.caption){q=document.createElement("div");q.innerHTML=b.caption;q.style.display="none";b._capCont=q;u.appendChild(q)}e&&e.appendChild(u);
if(!window.Popcorn.player&&!k.module){k.module=true;m.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",h)}else h();b.toString=function(){return b.source||b._natives.manifest.options.source["default"]}},start:function(b,f){if(f._capCont)f._capCont.style.display="";f._container.style.width=f.width+"px";f._container.style.height=f.height+"px";f._container.style.visibility="visible";f._container.style.overflow="visible";f.autoplay&&f.popcorn.play()},end:function(b,f){if(f._capCont)f._capCont.style.display=
"none";f._container.style.width="0px";f._container.style.height="0px";f._container.style.visibility="hidden";f._container.style.overflow="hidden";f.popcorn.pause()},_teardown:function(b){b.popcorn&&b.popcorn.destory&&b.popcorn.destroy();document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._container)}})})(Popcorn,this);(function(m){m.plugin("mustache",function(i){var k,d,b,f;m.getScript("http://mustache.github.com/extras/mustache.js");var h=!!i.dynamic,e=typeof i.template,n=typeof i.data,u=document.getElementById(i.target);i.container=u||document.createElement("div");if(e==="function")if(h)b=i.template;else f=i.template(i);else f=e==="string"?i.template:"";if(n==="function")if(h)k=i.data;else d=i.data(i);else d=n==="string"?JSON.parse(i.data):n==="object"?i.data:"";return{start:function(q,v){var w=function(){if(window.Mustache){if(k)d=
k(v);if(b)f=b(v);var o=Mustache.to_html(f,d).replace(/^\s*/mg,"");v.container.innerHTML=o}else setTimeout(function(){w()},10)};w()},end:function(q,v){v.container.innerHTML=""},_teardown:function(){k=d=b=f=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",
label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(m){function i(d,b){if(d.map)d.map.div.style.display=b;else setTimeout(function(){i(d,b)},10)}var k=1;m.plugin("openmap",function(d){var b,f,h,e,n,u,q,v,w=document.getElementById(d.target);b=document.createElement("div");b.id="openmapdiv"+k;b.style.width="100%";b.style.height="100%";k++;w&&w.appendChild(b);v=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(d.location){location=new OpenLayers.LonLat(0,0);m.getJSONP("//tinygeocoder.com/create-api.php?q="+d.location+"&callback=jsonp",
function(z){f=new OpenLayers.LonLat(z[1],z[0])})}else f=new OpenLayers.LonLat(d.lng,d.lat);d.type=d.type||"ROADMAP";switch(d.type){case "SATELLITE":d.map=new OpenLayers.Map({div:b,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var o=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});d.map.addLayer(o);e=new OpenLayers.Projection("EPSG:4326");h=new OpenLayers.Projection("EPSG:4326");break;case "TERRAIN":e=new OpenLayers.Projection("EPSG:4326");
h=new OpenLayers.Projection("EPSG:4326");d.map=new OpenLayers.Map({div:b,projection:h});o=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});d.map.addLayer(o);break;case "STAMEN-TONER":case "STAMEN-WATERCOLOR":case "STAMEN-TERRAIN":o=d.type.replace("STAMEN-","").toLowerCase();o=new OpenLayers.Layer.Stamen(o);e=new OpenLayers.Projection("EPSG:4326");h=new OpenLayers.Projection("EPSG:900913");f=f.transform(e,h);d.map=new OpenLayers.Map({div:b,projection:h,
displayProjection:e,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});d.map.addLayer(o);break;default:h=new OpenLayers.Projection("EPSG:900913");e=new OpenLayers.Projection("EPSG:4326");f=f.transform(e,h);d.map=new OpenLayers.Map({div:b,projection:h,displayProjection:e});o=new OpenLayers.Layer.OSM;d.map.addLayer(o)}if(d.map){d.map.setCenter(f,d.zoom||10);d.map.div.style.display="none"}}else setTimeout(function(){v()},50)};v();return{_setup:function(o){window.OpenLayers||
m.getScript("//openlayers.org/api/OpenLayers.js",function(){m.getScript("//maps.stamen.com/js/tile.stamen.js")});var z=function(){if(o.map){o.zoom=o.zoom||2;if(o.zoom&&typeof o.zoom!=="number")o.zoom=+o.zoom;o.map.setCenter(f,o.zoom);if(o.markers){var J=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),E=function(j){clickedFeature=j.feature;if(clickedFeature.attributes.text){q=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),
new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){u.unselect(this.feature)});clickedFeature.popup=q;q.feature=clickedFeature;o.map.addPopup(q)}},g=function(j){feature=j.feature;if(feature.popup){q.feature=null;o.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},G=function(j){m.getJSONP("//tinygeocoder.com/create-api.php?q="+j.location+"&callback=jsonp",function(s){s=(new OpenLayers.Geometry.Point(s[1],s[0])).transform(e,h);var t=OpenLayers.Util.extend({},
J);if(!j.size||isNaN(j.size))j.size=14;t.pointRadius=j.size;t.graphicOpacity=1;t.externalGraphic=j.icon;s=new OpenLayers.Feature.Vector(s,null,t);if(j.text)s.attributes={text:j.text};n.addFeatures([s])})};n=new OpenLayers.Layer.Vector("Point Layer",{style:J});o.map.addLayer(n);for(var A=0,O=o.markers.length;A<O;A++){var a=o.markers[A];if(a.text)if(!u){u=new OpenLayers.Control.SelectFeature(n);o.map.addControl(u);u.activate();n.events.on({featureselected:E,featureunselected:g})}if(a.location)G(a);
else{var c=(new OpenLayers.Geometry.Point(a.lng,a.lat)).transform(e,h),l=OpenLayers.Util.extend({},J);if(!a.size||isNaN(a.size))a.size=14;l.pointRadius=a.size;l.graphicOpacity=1;l.externalGraphic=a.icon;c=new OpenLayers.Feature.Vector(c,null,l);if(a.text)c.attributes={text:a.text};n.addFeatures([c])}}}}else setTimeout(function(){z()},13)};z()},start:function(o,z){i(z,"block")},end:function(o,z){i(z,"none")},_teardown:function(){w&&w.removeChild(b);b=map=f=h=e=n=u=q=null}}},{about:{name:"Popcorn OpenMap Plugin",
version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location",
"default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(m){m=m.target;if(m.nodeName==="A"||m.parentNode&&m.parentNode.nodeName==="A")Popcorn.instances.forEach(function(i){i.options.pauseOnLinkClicked&&i.pause()})},false);(function(m){var i=0,k=function(d,b){var f=d.container=document.createElement("div"),h=f.style,e=d.media,n=function(){var u=d.position();h.fontSize="18px";h.width=e.offsetWidth+"px";h.top=u.top+e.offsetHeight-f.offsetHeight-40+"px";h.left=u.left+"px";setTimeout(n,10)};f.id=b||m.guid();h.position="absolute";h.color="white";h.textShadow="black 2px 2px 6px";h.fontWeight="bold";h.textAlign="center";n();d.media.parentNode.appendChild(f);return f};m.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",
version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(d){var b=document.createElement("div");b.id="subtitle-"+i++;b.style.display="none";!this.container&&(!d.target||d.target==="subtitle-container")&&k(this);d.container=d.target&&d.target!=="subtitle-container"?document.getElementById(d.target)||
k(this,d.target):this.container;document.getElementById(d.container.id)&&document.getElementById(d.container.id).appendChild(b);d.innerContainer=b;d.showSubtitle=function(){d.innerContainer.innerHTML=d.text||""}},start:function(d,b){b.innerContainer.style.display="inline";b.showSubtitle(b,b.text)},end:function(d,b){b.innerContainer.style.display="none";b.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})})(Popcorn);(function(m){function i(b){return String(b).replace(/&(?!\w+;)|[<>"']/g,function(f){return d[f]||f})}function k(b,f){var h=b.container=document.createElement("div"),e=h.style,n=b.media,u=function(){var q=b.position();e.fontSize="18px";e.width=n.offsetWidth+"px";e.top=q.top+n.offsetHeight-h.offsetHeight-40+"px";e.left=q.left+"px";setTimeout(u,10)};h.id=f||"";e.position="absolute";e.color="white";e.textShadow="black 2px 2px 6px";e.fontWeight="bold";e.textAlign="center";u();b.media.parentNode.appendChild(h);
return h}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};m.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(b){var f,h,e=b._container=document.createElement("div");
e.style.display="none";if(b.target)if(f=m.dom.find(b.target)){if(["VIDEO","AUDIO"].indexOf(f.nodeName)>-1)f=k(this,b.target+"-overlay")}else f=k(this,b.target);else f=this.container?this.container:k(this);b._target=f;h=b.escape?i(b.text):b.text;h=b.multiline?h.replace(/\r?\n/gm,"<br>"):h;e.innerHTML=h||"";f.appendChild(e);b.toString=function(){return b.text||b._natives.manifest.options.text["default"]}},start:function(b,f){f._container.style.display="inline"},end:function(b,f){f._container.style.display=
"none"},_teardown:function(b){var f=b._target;f&&f.removeChild(b._container)}})})(Popcorn);(function(m){var i=1;m.plugin("timeline",function(k){var d=document.getElementById(k.target),b=document.createElement("div"),f,h=true;if(d&&!d.firstChild){d.appendChild(f=document.createElement("div"));f.style.width="inherit";f.style.height="inherit";f.style.overflow="auto"}else f=d.firstChild;b.style.display="none";b.id="timelineDiv"+i;k.direction=k.direction||"up";if(k.direction.toLowerCase()==="down")h=false;if(d&&f)h?f.insertBefore(b,f.firstChild):f.appendChild(b);i++;b.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+
k.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+k.text+"</span><br />"+k.innerHTML;return{start:function(e,n){b.style.display="block";if(n.direction==="down")f.scrollTop=f.scrollHeight},end:function(){b.style.display="none"},_teardown:function(){f&&b&&f.removeChild(b)&&!f.firstChild&&d.removeChild(f)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},
end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(m){m.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(i){var k=document.getElementById(i.target);i.src=i.src.replace(/^(https?:)?(\/\/)?/,
"//");i._iframe=document.createElement("iframe");i._iframe.setAttribute("width","100%");i._iframe.setAttribute("height","100%");i._iframe.id=i.id;i._iframe.src=i.src;i._iframe.style.display="none";k&&k.appendChild(i._iframe)},start:function(i,k){k._iframe.src=k.src;k._iframe.style.display="inline"},end:function(i,k){k._iframe.style.display="none"},_teardown:function(i){document.getElementById(i.target)&&document.getElementById(i.target).removeChild(i._iframe)}})})(Popcorn);var wikiCallback;
(function(m){m.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},
numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(i){var k,d=m.guid();if(!i.lang)i.lang="en";i.numberofwords=i.numberofwords||200;window["wikiCallback"+d]=function(b){i._link=document.createElement("a");i._link.setAttribute("href",i.src);i._link.setAttribute("target","_blank");i._link.innerHTML=i.title||b.parse.displaytitle;i._desc=document.createElement("p");k=b.parse.text["*"].substr(b.parse.text["*"].indexOf("<p>"));
k=k.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");k=k.split(" ");i._desc.innerHTML=k.slice(0,k.length>=i.numberofwords?i.numberofwords:k.length).join(" ")+" ...";i._fired=true};i.src&&m.getScript("//"+i.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+i.src.slice(i.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d);i.toString=function(){return i.src||i._natives.manifest.options.src["default"]}},start:function(i,k){var d=function(){if(k._fired){if(k._link&&
k._desc)if(document.getElementById(k.target)){document.getElementById(k.target).appendChild(k._link);document.getElementById(k.target).appendChild(k._desc);k._added=true}}else setTimeout(function(){d()},13)};d()},end:function(i,k){if(k._added){document.getElementById(k.target).removeChild(k._link);document.getElementById(k.target).removeChild(k._desc)}},_teardown:function(i){if(i._added){i._link.parentNode&&document.getElementById(i.target).removeChild(i._link);i._desc.parentNode&&document.getElementById(i.target).removeChild(i._desc);
delete i.target}}})})(Popcorn);(function(m){var i={},k=0,d=document.createElement("span"),b=["webkit","Moz","ms","O",""],f=["Transform","TransitionDuration","TransitionTimingFunction"],h={},e;document.getElementsByTagName("head")[0].appendChild(d);for(var n=0,u=f.length;n<u;n++)for(var q=0,v=b.length;q<v;q++){e=b[q]+f[n];if(e in d.style){h[f[n].toLowerCase()]=e;break}}document.getElementsByTagName("head")[0].appendChild(d);m.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",
label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(w){w._duration=w.end-w.start;var o;if(!(o=i[w.target])){o=w.target;i[o]=document.createElement("div");var z=document.getElementById(o);z&&z.appendChild(i[o]);i[o].style.height="100%";i[o].style.position="relative";o=i[o]}w._container=o;w.word=document.createElement("span");
w.word.style.position="absolute";w.word.style.whiteSpace="nowrap";w.word.style.opacity=0;w.word.style.MozTransitionProperty="opacity, -moz-transform";w.word.style.webkitTransitionProperty="opacity, -webkit-transform";w.word.style.OTransitionProperty="opacity, -o-transform";w.word.style.transitionProperty="opacity, transform";w.word.style[h.transitionduration]="1s, "+w._duration+"s";w.word.style[h.transitiontimingfunction]="linear";w.word.innerHTML=w.text;w.word.style.color=w.color||"black"},start:function(w,
o){o._container.appendChild(o.word);o.word.style[h.transform]="";o.word.style.fontSize=~~(30+20*Math.random())+"px";k%=o._container.offsetWidth-o.word.offsetWidth;o.word.style.left=k+"px";k+=o.word.offsetWidth+10;o.word.style[h.transform]="translateY("+(o._container.offsetHeight-o.word.offsetHeight)+"px)";o.word.style.opacity=1;setTimeout(function(){o.word.style.opacity=0},(o.end-o.start-1||1)*1E3)},end:function(w,o){o.word.style.opacity=0},_teardown:function(w){var o=document.getElementById(w.target);
w.word.parentNode&&w._container.removeChild(w.word);i[w.target]&&!i[w.target].childElementCount&&o&&o.removeChild(i[w.target])&&delete i[w.target]}})})(Popcorn);(function(m){m.parser("parseJSON","JSON",function(i){var k={title:"",remote:"",data:[]};m.forEach(i.data,function(d){k.data.push(d)});return k})})(Popcorn);(function(m){m.parser("parseSBV",function(i){var k={title:"",remote:"",data:[]},d=[],b=0,f=0,h=function(w){w=w.split(":");var o=w.length-1,z;try{z=parseInt(w[o-1],10)*60+parseFloat(w[o],10);if(o===2)z+=parseInt(w[0],10)*3600}catch(J){throw"Bad cue";}return z},e=function(w,o){var z={};z[w]=o;return z};i=i.text.split(/(?:\r\n|\r|\n)/gm);for(f=i.length;b<f;){var n={},u=[],q=i[b++].split(",");try{n.start=h(q[0]);for(n.end=h(q[1]);b<f&&i[b];)u.push(i[b++]);n.text=u.join("<br />");d.push(e("subtitle",n))}catch(v){for(;b<
f&&i[b];)b++}for(;b<f&&!i[b];)b++}k.data=d;return k})})(Popcorn);(function(m){function i(d,b){var f={};f[d]=b;return f}function k(d){d=d.split(":");try{var b=d[2].split(",");if(b.length===1)b=d[2].split(".");return parseFloat(d[0],10)*3600+parseFloat(d[1],10)*60+parseFloat(b[0],10)+parseFloat(b[1],10)/1E3}catch(f){return 0}}m.parser("parseSRT",function(d,b){var f={title:"",remote:"",data:[]},h=[],e=0,n=0,u,q,v,w,o;u=d.text.split(/(?:\r\n|\r|\n)/gm);for(v=u.length-1;v>=0&&!u[v];)v--;w=v+1;for(e=0;e<w;e++){o={};v=[];for(e=e;!u[e];)e++;e=e;o.id=parseInt(u[e++],10);
q=u[e++].split(/[\t ]*--\>[\t ]*/);o.start=k(q[0]);n=q[1].indexOf(" ");if(n!==-1)q[1]=q[1].substr(0,n);for(o.end=k(q[1]);e<w&&u[e];)v.push(u[e++]);o.text=v.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");o.text=o.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");o.text=o.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");o.text=o.text.replace(/\\N/gi,"<br />");if(b&&b.target)o.target=b.target;h.push(i("subtitle",
o))}f.data=h;return f})})(Popcorn);(function(m){function i(b,f){var h=b.substr(10).split(","),e;e={start:k(h[f.start]),end:k(h[f.end])};if(e.start===-1||e.end===-1)throw"Invalid time";var n=w.call(q,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),u=n.replace,q;q=h.length;w=[];for(var v=f.text;v<q;v++)w.push(h[v]);q=w.join(",");var w=q.replace;e.text=u.call(n,/\\N/gi,"<br />");return e}function k(b){var f=b.split(":");if(b.length!==10||f.length<3)return-1;return parseInt(f[0],10)*3600+parseInt(f[1],10)*60+parseFloat(f[2],10)}function d(b,
f){var h={};h[b]=f;return h}m.parser("parseSSA",function(b){var f={title:"",remote:"",data:[]},h=[],e=0,n;b=b.text.split(/(?:\r\n|\r|\n)/gm);for(n=b.length;e<n&&b[e]!=="[Events]";)e++;var u=b[++e].substr(8).split(", "),q={},v,w;w=0;for(v=u.length;w<v;w++)if(u[w]==="Start")q.start=w;else if(u[w]==="End")q.end=w;else if(u[w]==="Text")q.text=w;for(;++e<n&&b[e]&&b[e][0]!=="[";)try{h.push(d("subtitle",i(b[e],q)))}catch(o){}f.data=h;return f})})(Popcorn);(function(m){function i(e,n,u){var q=e.firstChild;e=k(e,u);u=[];for(var v;q;){if(q.nodeType===1)if(q.nodeName==="p")u.push(d(q,n,e));else if(q.nodeName==="div"){v=b(q.getAttribute("begin"));if(v<0)v=n;u.push.apply(u,i(q,v,e))}q=q.nextSibling}return u}function k(e,n){var u=e.getAttribute("region");return u!==null?u:n||""}function d(e,n,u){var q={};q.text=(e.textContent||e.text).replace(f,"").replace(h,"<br />");q.id=e.getAttribute("xml:id")||e.getAttribute("id");q.start=b(e.getAttribute("begin"),n);
q.end=b(e.getAttribute("end"),n);q.target=k(e,u);if(q.end<0){q.end=b(e.getAttribute("duration"),0);if(q.end>=0)q.end+=q.start;else q.end=Number.MAX_VALUE}return{subtitle:q}}function b(e,n){var u;if(!e)return-1;try{return m.util.toSeconds(e)}catch(q){for(var v=e.length-1;v>=0&&e[v]<="9"&&e[v]>="0";)v--;u=v;v=parseFloat(e.substring(0,u));u=e.substring(u);return v*({h:3600,m:60,s:1,ms:0.001}[u]||-1)+(n||0)}}var f=/^[\s]+|[\s]+$/gm,h=/(?:\r\n|\r|\n)/gm;m.parser("parseTTML",function(e){var n={title:"",
remote:"",data:[]};if(!e.xml||!e.xml.documentElement)return n;e=e.xml.documentElement.firstChild;if(!e)return n;for(;e.nodeName!=="body";)e=e.nextSibling;if(e)n.data=i(e,0);return n})})(Popcorn);(function(m){m.parser("parseTTXT",function(i){var k={title:"",remote:"",data:[]},d=function(n){n=n.split(":");var u=0;try{return parseFloat(n[0],10)*60*60+parseFloat(n[1],10)*60+parseFloat(n[2],10)}catch(q){u=0}return u},b=function(n,u){var q={};q[n]=u;return q};i=i.xml.lastChild.lastChild;for(var f=Number.MAX_VALUE,h=[];i;){if(i.nodeType===1&&i.nodeName==="TextSample"){var e={};e.start=d(i.getAttribute("sampleTime"));e.text=i.getAttribute("text");if(e.text){e.end=f-0.001;h.push(b("subtitle",e))}f=
e.start}i=i.previousSibling}k.data=h.reverse();return k})})(Popcorn);(function(m){function i(d){var b=d.split(":");d=d.length;var f;if(d!==12&&d!==9)throw"Bad cue";d=b.length-1;try{f=parseInt(b[d-1],10)*60+parseFloat(b[d],10);if(d===2)f+=parseInt(b[0],10)*3600}catch(h){throw"Bad cue";}return f}function k(d,b){var f={};f[d]=b;return f}m.parser("parseVTT",function(d){var b={title:"",remote:"",data:[]},f=[],h=0,e=0,n,u;d=d.text.split(/(?:\r\n|\r|\n)/gm);e=d.length;if(e===0||d[0]!=="WEBVTT")return b;for(h++;h<e;){n=[];try{for(var q=h;q<e&&!d[q];)q++;h=q;var v=d[h++];q=
void 0;var w={};if(!v||v.indexOf("--\>")===-1)throw"Bad cue";q=v.replace(/--\>/," --\> ").split(/[\t ]+/);if(q.length<2)throw"Bad cue";w.id=v;w.start=i(q[0]);w.end=i(q[2]);for(u=w;h<e&&d[h];)n.push(d[h++]);u.text=n.join("<br />");f.push(k("subtitle",u))}catch(o){for(h=h;h<e&&d[h];)h++;h=h}}b.data=f;return b})})(Popcorn);(function(m){m.parser("parseXML","XML",function(i){var k={title:"",remote:"",data:[]},d={},b=function(q){q=q.split(":");if(q.length===1)return parseFloat(q[0],10);else if(q.length===2)return parseFloat(q[0],10)+parseFloat(q[1]/12,10);else if(q.length===3)return parseInt(q[0]*60,10)+parseFloat(q[1],10)+parseFloat(q[2]/12,10);else if(q.length===4)return parseInt(q[0]*3600,10)+parseInt(q[1]*60,10)+parseFloat(q[2],10)+parseFloat(q[3]/12,10)},f=function(q){for(var v={},w=0,o=q.length;w<o;w++){var z=q.item(w).nodeName,
J=q.item(w).nodeValue,E=d[J];if(z==="in")v.start=b(J);else if(z==="out")v.end=b(J);else if(z==="resourceid")for(var g in E){if(E.hasOwnProperty(g))if(!v[g]&&g!=="id")v[g]=E[g]}else v[z]=J}return v},h=function(q,v){var w={};w[q]=v;return w},e=function(q,v,w){var o={};m.extend(o,v,f(q.attributes),{text:q.textContent||q.text});v=q.childNodes;if(v.length<1||v.length===1&&v[0].nodeType===3)if(w)d[o.id]=o;else k.data.push(h(q.nodeName,o));else for(q=0;q<v.length;q++)v[q].nodeType===1&&e(v[q],o,w)};i=i.documentElement.childNodes;
for(var n=0,u=i.length;n<u;n++)if(i[n].nodeType===1)i[n].nodeName==="manifest"?e(i[n],{},true):e(i[n],{},false);return k})})(Popcorn);(function(m,i){i.player("soundcloud",{_canPlayType:function(k,d){return typeof d==="string"&&i.HTMLSoundCloudAudioElement._canPlaySrc(d)&&k.toLowerCase()!=="audio"}});i.soundcloud=function(k,d,b){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'soundcloud'. Please use Popcorn.HTMLSoundCloudAudioElement directly.");var f=i.HTMLSoundCloudAudioElement(k);k=i(f,b);setTimeout(function(){f.src=d},0);return k}})(window,Popcorn);(function(m,i){i.player("vimeo",{_canPlayType:function(k,d){return typeof d==="string"&&i.HTMLVimeoVideoElement._canPlaySrc(d)}});i.vimeo=function(k,d,b){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'vimeo'. Please use Popcorn.HTMLVimeoVideoElement directly.");var f=i.HTMLVimeoVideoElement(k);k=i(f,b);setTimeout(function(){f.src=d},0);return k}})(window,Popcorn);(function(m,i){var k=function(d,b){return typeof b==="string"&&i.HTMLYouTubeVideoElement._canPlaySrc(b)};i.player("youtube",{_canPlayType:k});i.youtube=function(d,b,f){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'youtube'. Please use Popcorn.HTMLYouTubeVideoElement directly.");var h=i.HTMLYouTubeVideoElement(d);d=i(h,f);setTimeout(function(){h.src=b},0);return d};i.youtube.canPlayType=k})(window,Popcorn);
