<!DOCTYPE html>
<html>
  <head>
    <title>Popcorn Test Suite</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../qunit/qunit.css" type="text/css" media="screen">
    <script src="../../jquery.js"></script>
    <script src="../../qunit/qunit.js"></script>
    <script src="../../../popcorn.js"></script>
    <script src="../../popcorn.inject.js"></script>
    <script>
      asyncTest( "Unsupported video error", function() {

        var unsupported = document.createElement( "video" ),
            popcorn = Popcorn( unsupported );

        popcorn.on( "error", function() {

          clearTimeout( timeout );
          equal( popcorn.error.code, 4, "Unsupported video reports error code 4." );
          popcorn.destroy();
          start();
        });

        unsupported.src = "data:video/x-unsupported,0";

        // Safari won't pass this test, so we'll just skip it
        // https://bugs.webkit.org/show_bug.cgi?id=88423
        // https://webmademovies.lighthouseapp.com/projects/63272-popcornjs/tickets/1226
        var timeout = setTimeout(function() {
          ok( true, "Safari doesn't pass this test, so skip it" );
          popcorn.destroy();
          start();
        }, 1000);
      });
    </script>
  </head>
  <body>
    <h1 id="qunit-header">Popcorn.js Test Suite[ Core - Unsupported Video ]</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">
    </div>
  </body>
</html>
