<!DOCTYPE html>
<html>
  <head>
    <title>Popcorn Test Suite</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../qunit/qunit.css" type="text/css" media="screen">
    <script src="../../jquery.js"></script>
    <script src="../../qunit/qunit.js"></script>
    <script src="../../../popcorn.js"></script>
    <script src="../../popcorn.inject.js"></script>
    <script>
      test( "position", 25, function() {

        var $absolute = $( ".absolute" ),
            $relative = $( ".relative" ),
            $fixed = $( ".fixed" ),
            $static = $( ".static" ),
            tests,
            p;

        $( "#position-tests" ).show();

        tests = [
          {
            id: "absolute-1",
            top: 0,
            left: 0
          },
          {
            id: "absolute-1-1",
            top: 1,
            left: 1
          },
          {
            id: "absolute-1-1-1",
            top: 2,
            left: 2
          },
          {
            id: "absolute-2",
            top: 19,
            left: 19
          }
        ];

        Popcorn.forEach( tests, function( test ) {
          p = Popcorn( "#vid-" + test.id );
          equal( p.position().top,  test.top,  "Popcorn( '#vid-" + test.id + "' ).position().top" );
          equal( p.position().left, test.left, "Popcorn( '#vid-" + test.id + "' ).position().left" );
          p.destroy();
        });

        tests = [
          {
            id: "relative-1",
            top: 0,
            left: 0
          },
          {
            id: "relative-2",
            top: 120,
            left: 20
          }
        ];

        Popcorn.forEach( tests, function( test ) {
          p = Popcorn( "#vid-" + test.id );
          equal( p.position().top,  test.top,  "Popcorn( '#vid-" + test.id + "' ).position().top" );
          equal( p.position().left, test.left, "Popcorn( '#vid-" + test.id + "' ).position().left" );
          p.destroy();
        });

        tests = [
          {
            id: "fixed-1",
              top:  0,
              left:  0
          },
          {
            id: "fixed-2",
            top: 20,
            left: 20
          }
        ];

        Popcorn.forEach( tests, function( test ) {
          p = Popcorn( "#vid-" + test.id );
          equal( p.position().top,  test.top,  "Popcorn('#vid-" + test.id + "').position().top" );
          equal( p.position().left, test.left, "Popcorn('#vid-" + test.id + "').position().left" );
          p.destroy();
        });

        tests = [
          {
            id: "static-1",
            top: 200,
            left:  0
          },
          {
            id: "static-1-1",
            top:  0,
            left:  0
          },
          {
            id: "static-1-1-1",
            top:  0,
            left:  0
          },
          {
            id: "static-2",
            top: 300,
            left: 0
          }
        ];

        Popcorn.forEach( tests, function( test ) {
          p = Popcorn( "#vid-" + test.id );
          equal( p.position().top,  test.top,  "Popcorn( '#vid-" + test.id + "' ).position().top" );
          equal( p.position().left, test.left, "Popcorn( '#vid-" + test.id + "' ).position().left" );
          p.destroy();
        });

        try {
          p = Popcorn( "#audio" );
          ok( p.position(), "position called from audio" );
        } catch( e ) {
          ok( false, e );
        }

        p.destroy();
        $( "#position-tests" ).hide();
      });
    </script>
  </head>
  <body>
    <h1 id="qunit-header">Popcorn.js Test Suite[ Position - Position ]</h1>
    <h2 id="qunit-banner"></h2>
    <div id="qunit-testrunner-toolbar"></div>
    <h2 id="qunit-userAgent"></h2>
    <ol id="qunit-tests"></ol>
    <div id="qunit-fixture">
    </div>

    <audio id="audio" data-timeline-sources="data/parserData.json" controls>
      <source src="italia.mp4" type='audio/mp4; codecs="mp4a.40.2"'>
      <source src="italia.ogg" type='audio/ogg; codecs="vorbis"'>
    </audio>

    <!-- Position Tests Adapted From jQuery offsets/dimensions Tests -->
    <style type="text/css" media="screen">
      #position-tests { display:none;margin:0; position: fixed;top:0px;left:0px;  }

      div.absolute { position: absolute; margin: 0px; width: 100px; height: 100px; background: #fff; }
      #absolute-1 { top: 0; left: 0; }
      #absolute-1-1 { top: 1px; left: 1px; }
      #absolute-1-1-1 { top: 1px; left: 1px; }
      #absolute-2 { top: 19px; left: 19px; }

      div.relative { position: relative; top: 0; left: 0; width: 100px; height: 100px; background: #fff; overflow: hidden; }
      #relative-2 { top: 20px; left: 20px; }

      div.fixed { position: fixed; width: 100px; height: 100px; background: #fff; overflow: hidden; }
      #fixed-1 { top: 0; left: 0; }
      #fixed-2 { top: 20px; left: 20px; }

      div.static { position: static; top: 0; left: 0; width: 100px; height: 100px; background: #fff; overflow: hidden; }
      #static-2 { top: 20px; left: 20px; }

    </style>

    <div id="position-tests">
      <div id="absolute-1" class="absolute"><video id="vid-absolute-1" src="../../trailer.ogv" style="visibility:hidden"></video>
        <div id="absolute-1-1" class="absolute"><video  id="vid-absolute-1-1" src="../../trailer.ogv" style="visibility:hidden"></video>
          <div id="absolute-1-1-1" class="absolute"><video  id="vid-absolute-1-1-1" src="../../trailer.ogv" style="visibility:hidden"></video></div>
        </div>
      </div>
      <div id="absolute-2" class="absolute"><video  id="vid-absolute-2" src="../../trailer.ogv" style="visibility:hidden"></video></div>

      <div id="relative-1" class="relative"><video  id="vid-relative-1" src="../../trailer.ogv" style="visibility:hidden"></video>
        <div id="relative-1-1" class="relative"><video  id="vid-relative-1-1" src="../../trailer.ogv" style="visibility:hidden"></video>
          <div id="relative-1-1-1" class="relative"><video  id="vid-relative-1-1-1" src="../../trailer.ogv" style="visibility:hidden"></video></div>
        </div>
      </div>
      <div id="relative-2" class="relative"><video  id="vid-relative-2" src="../../trailer.ogv" style="visibility:hidden"></video></div>


      <div id="fixed-1" class="fixed"><video  id="vid-fixed-1" src="../../trailer.ogv" style="visibility:hidden"></video></div>
      <div id="fixed-2" class="fixed"><video  id="vid-fixed-2" src="../../trailer.ogv" style="visibility:hidden"></video></div>

      <div id="static-1" class="static"><video  id="vid-static-1" src="../../trailer.ogv" style="visibility:hidden">
        <div id="static-1-1" class="static"><video  id="vid-static-1-1" src="../../trailer.ogv" style="visibility:hidden">
          <div id="static-1-1-1" class="static"><video  id="vid-static-1-1-1" src="../../trailer.ogv" style="visibility:hidden"></div>
        </div>
      </div>
      <div id="static-2" class="static"><video  id="vid-static-2" src="../../trailer.ogv" style="visibility:hidden"></div>

    </div>
  </body>
</html>
